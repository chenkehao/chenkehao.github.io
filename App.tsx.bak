
import React, { useState, useMemo, useEffect, useRef } from 'react';
import { HashRouter as Router, Routes, Route, Link, useParams, useNavigate, useLocation } from 'react-router-dom';
import { 
  Users, Briefcase, Zap, ShieldCheck, 
  BarChart3, Plus, Sparkles, FileText, 
  CheckCircle2, Clock, TrendingUp, Users2, ArrowRight, Search, X,
  BrainCircuit, MessageCircleQuestion, Lightbulb, GraduationCap, ChevronLeft, Calendar,
  Download, Map, Send, Bot, User as UserIcon, Award, Globe, LineChart, Target, BookOpen, Lock, Mail, Github,
  Smartphone, ShieldEllipsis, MessageSquare, ExternalLink, Phone, MapPin, Share2, Loader2, Rocket, Terminal, Play, Square, Activity,
  Cpu, Coins, Fingerprint, Building2, Building, Layers, Eye, Compass, Info, Heart, LayoutDashboard, Settings, PieChart, CheckSquare, ListTodo, PenTool,
  History, Timer, ClipboardCheck, Filter, ChevronRight, ChevronDown, UserCircle2, Database, AlertCircle, Sparkle, Eraser, Milestone, Brain, Pin, Trash2, Edit3, Save, CreditCard, ArrowUpRight, TrendingDown, Wallet, Key, UserPlus, ShieldAlert, Laptop, Bell, Verified, Medal, Trophy, Landmark, CircleDollarSign, Gem, CreditCard as CreditCardIcon, Github as GithubIcon, MessageCircle, Tag
} from 'lucide-react';
import { analyzeResume, chatWithInterviewer } from './services/geminiService';
import { CandidateProfile, Job, SkillGap, AgentFeedback, AccountTier, TeamMember, CustomLLMConfig } from './types';
import RadarChart from './components/RadarChart';
import { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';

// --- æ¨¡æ‹Ÿæ•°æ® ---
const MOCK_JOBS: Job[] = [
  {
    id: '1',
    title: 'é«˜çº§ AI å·¥ç¨‹å¸ˆ',
    company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€',
    location: 'ä¸Šæµ· (è¿œç¨‹)',
    salary: 'Â¥50k - Â¥80k',
    matchScore: 98,
    tags: ['ç”Ÿæˆå¼ AI', 'Python', 'æ™ºèƒ½ä½“ååŒ'],
    description: 'è´Ÿè´£å¤šæ™ºèƒ½ä½“ç¼–æ’ç³»ç»Ÿçš„æ ¸å¿ƒç ”å‘ã€‚'
  },
  {
    id: '2',
    title: 'äº§å“è®¾è®¡ä¸»ç®¡',
    company: 'Nexus åˆ›æ„å®éªŒå®¤',
    location: 'åŒ—äº¬',
    salary: 'Â¥40k - Â¥65k',
    matchScore: 82,
    tags: ['Figma', 'UX ç­–ç•¥', 'äººæœºäº¤äº’'],
    description: 'å¡‘é€ æœªæ¥äººæœºåä½œç•Œé¢ã€‚'
  },
  {
    id: '3',
    title: 'å…¨æ ˆå¼€å‘ä¸“å®¶ (Rust/React)',
    company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€',
    location: 'æ­å·',
    salary: 'Â¥45k - Â¥70k',
    matchScore: 92,
    tags: ['Rust', 'é«˜æ€§èƒ½è®¡ç®—', 'å‰ç«¯å·¥ç¨‹åŒ–'],
    description: 'æ‰“é€ æé€Ÿå“åº”çš„æ™ºèƒ½ä½“äº¤äº’ç»ˆç«¯ã€‚'
  },
  {
    id: '4',
    title: 'å¤§æ¨¡å‹ç®—æ³•ç§‘å­¦å®¶',
    company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€',
    location: 'æ·±åœ³',
    salary: 'Â¥70k - Â¥120k',
    matchScore: 85,
    tags: ['NLP', 'Transformer', 'æ¨¡å‹å¾®è°ƒ'],
    description: 'æ·±è€•å‚åŸŸæ¨¡å‹æ€§èƒ½è¾¹ç•Œã€‚'
  },
  {
    id: '5',
    title: 'AI è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆ',
    company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€',
    location: 'å…¨çƒè¿œç¨‹',
    salary: 'Â¥55k - Â¥90k',
    matchScore: 88,
    tags: ['Bç«¯èµ‹èƒ½', 'SAAS', 'æ•°å­—åŒ–è½¬å‹'],
    description: 'è¿æ¥æŠ€æœ¯å®ç°ä¸å•†ä¸šè½åœ°ã€‚'
  },
  {
    id: '6',
    title: 'èµ„æ·± DevOps å·¥ç¨‹å¸ˆ',
    company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€',
    location: 'æˆéƒ½',
    salary: 'Â¥35k - Â¥55k',
    matchScore: 78,
    tags: ['K8s', 'äº‘åŸç”Ÿ', 'æ™ºèƒ½è¿ç»´'],
    description: 'æ„å»ºç¨³å®šçš„å¤šæ™ºèƒ½ä½“äº‘ç«¯ç¯å¢ƒã€‚'
  }
];

const RECOMMENDED_JOBS = [
  {
    id: 1,
    title: 'é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ',
    company: 'å­—èŠ‚è·³åŠ¨',
    logo: 'ğŸ“±',
    location: 'åŒ—äº¬',
    salary: '40K-60KÂ·16è–ª',
    match: 92,
    tags: ['React', 'TypeScript', 'å¤§å‚'],
    aiIntro: 'å·²ä¸ºæ‚¨åŒ¹é…åˆ° 3 ä½è¯¥å…¬å¸çš„é¢è¯•å®˜æ™ºèƒ½ä½“ï¼Œå¯æä¾›æ¨¡æ‹Ÿé¢è¯•å’Œå†…æ¨æœºä¼š'
  },
  {
    id: 2,
    title: 'æŠ€æœ¯ä¸“å®¶ï¼ˆå‰ç«¯æ–¹å‘ï¼‰',
    company: 'é˜¿é‡Œå·´å·´',
    logo: 'ğŸ›’',
    location: 'æ­å·',
    salary: '45K-70KÂ·15è–ª',
    match: 88,
    tags: ['Vue', 'å·¥ç¨‹åŒ–', 'å›¢é˜Ÿç®¡ç†'],
    aiIntro: 'æ‚¨çš„æŠ€æœ¯æ ˆä¸è¯¥å²—ä½é«˜åº¦åŒ¹é…ï¼ŒAI é¢è¯•å®˜å¯å¸®åŠ©æ‚¨å‡†å¤‡æ¶æ„è®¾è®¡é¢è¯•'
  },
  {
    id: 3,
    title: 'èµ„æ·±å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆ',
    company: 'è…¾è®¯ç§‘æŠ€',
    logo: 'ğŸ’¬',
    location: 'æ·±åœ³',
    salary: '35K-55KÂ·14è–ª',
    match: 85,
    tags: ['React', 'å°ç¨‹åº', 'æ€§èƒ½ä¼˜åŒ–'],
    aiIntro: 'æ¨èå¼€å¯ AI èŒä¸šè§„åˆ’æ¨¡å¼ï¼Œä¸ºæ‚¨å®šåˆ¶é¢è¯•å‡†å¤‡æ–¹æ¡ˆ'
  },
  {
    id: 4,
    title: 'Web å‰ç«¯æ¶æ„å¸ˆ',
    company: 'ç¾å›¢',
    logo: 'ğŸœ',
    location: 'åŒ—äº¬',
    salary: '50K-80KÂ·15è–ª',
    match: 78,
    tags: ['æ¶æ„è®¾è®¡', 'æ€§èƒ½ä¼˜åŒ–', 'å›¢é˜Ÿå»ºè®¾'],
    aiIntro: 'è¯¥å²—ä½å¯¹æ¶æ„èƒ½åŠ›è¦æ±‚è¾ƒé«˜ï¼ŒAI å¯¼å¸ˆå¯æä¾›ä¸“é¡¹èƒ½åŠ›æå‡æ–¹æ¡ˆ'
  }
];

const ENTERPRISE_MEMORIES = [
  { id: 1, type: 'æ–‡åŒ–', content: 'å´‡å°šæå®¢ç²¾ç¥ï¼Œæ‰å¹³åŒ–ç®¡ç†ï¼Œæ¯ä¸¤å‘¨ä¸€æ¬¡æŠ€æœ¯å†…éƒ¨åˆ†äº«ã€‚', date: '2024-05-10', importance: 'High', color: 'bg-rose-500/10 text-rose-400 border-rose-500/20' },
  { id: 2, type: 'æŠ€æœ¯', content: 'æ ¸å¿ƒæ¶æ„åŸºäº Go/Rustï¼Œå‰ç«¯åå¥½ React ç”Ÿæ€ï¼Œæå…¶çœ‹é‡ä»£ç çš„å¯æµ‹è¯•æ€§ã€‚', date: '2024-05-12', importance: 'Medium', color: 'bg-indigo-500/10 text-indigo-400 border-indigo-500/20' },
  { id: 3, type: 'è¦æ±‚', content: 'å¯»æ‰¾å…·æœ‰â€˜è‡ªé©±åŠ¨åŠ›â€™å’Œâ€˜å…¨çƒåŒ–ååŒç»éªŒâ€™çš„äººæ‰ï¼Œæœ‰å¼€æºè´¡çŒ®èƒŒæ™¯è€…ä¼˜å…ˆã€‚', date: '2024-05-15', importance: 'High', color: 'bg-amber-500/10 text-amber-400 border-amber-500/20' },
  { id: 4, type: 'ç­–ç•¥', content: 'ä¼˜å…ˆæ»¡è¶³ 100% è¿œç¨‹åŠå…¬éœ€æ±‚ï¼Œé‡ç‚¹è€ƒå¯Ÿå€™é€‰äººçš„å¼‚æ­¥æ²Ÿé€šèƒ½åŠ›ã€‚', date: '2024-05-18', importance: 'Medium', color: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20' },
];

const CANDIDATE_MEMORIES = [
  { id: 1, type: 'æŠ€èƒ½', content: 'React ç”Ÿæ€ç²¾é€šï¼ŒTypeScript ä¸¥æ ¼æ¨¡å¼å®è·µè€…ï¼Œè¿½æ±‚ä»£ç å¯ç»´æŠ¤æ€§ã€‚', date: '2024-05-10', importance: 'High', color: 'bg-indigo-500/10 text-indigo-400 border-indigo-500/20' },
  { id: 2, type: 'ç»éªŒ', content: '5 å¹´+ å‰ç«¯æ¶æ„ç»éªŒï¼Œä¸»å¯¼è¿‡å¤šä¸ªç™¾ä¸‡çº§ç”¨æˆ·äº§å“é‡æ„é¡¹ç›®ã€‚', date: '2024-05-12', importance: 'Medium', color: 'bg-emerald-500/10 text-emerald-400 border-emerald-500/20' },
  { id: 3, type: 'åå¥½', content: 'å€¾å‘äºæ‰å¹³åŒ–æ–‡åŒ–å›¢é˜Ÿï¼Œé‡è§†æŠ€æœ¯åˆ†äº«å’ŒæŒç»­å­¦ä¹ æ°›å›´ã€‚', date: '2024-05-15', importance: 'High', color: 'bg-rose-500/10 text-rose-400 border-rose-500/20' },
  { id: 4, type: 'ç›®æ ‡', content: 'å¯»æ±‚ AI æ–¹å‘è½¬å‹æœºä¼šï¼Œå¸Œæœ›åœ¨æ™ºèƒ½ä½“äº§å“é¢†åŸŸæ·±è€•ã€‚', date: '2024-05-18', importance: 'Medium', color: 'bg-amber-500/10 text-amber-400 border-amber-500/20' },
];

const MOCK_QUALIFICATIONS = [
  { id: 1, title: 'å›½å®¶é«˜æ–°æŠ€æœ¯ä¼ä¸š', description: 'è¿ç»­ä¸‰å¹´è·å¾—è®¤è¯ï¼Œåœ¨ AI ç®—æ³•é¢†åŸŸæ‹¥æœ‰æ ¸å¿ƒè‡ªä¸»çŸ¥è¯†äº§æƒã€‚', icon: Medal, color: 'text-amber-500', bg: 'bg-amber-50' },
  { id: 2, title: 'ISO 27001 ä¿¡æ¯å®‰å…¨è®¤è¯', description: 'è¾¾åˆ°å›½é™…é¡¶çº§æ•°æ®å®‰å…¨æ ‡å‡†ï¼Œç¡®ä¿äººæ‰æ•°æ®ä¸ä¼ä¸šæœºå¯†ä¸‡æ— ä¸€å¤±ã€‚', icon: ShieldCheck, color: 'text-blue-500', bg: 'bg-blue-50' },
  { id: 3, title: '2023 å¹´åº¦æœ€ä½³ AI é›‡ä¸»', description: 'ç”±è¡Œä¸šåª’ä½“è¯„é€‰ï¼Œè¡¨å½°æˆ‘ä»¬åœ¨äººæœºåä½œåŠå…¬æ¨¡å¼ä¸Šçš„å“è¶Šåˆ›æ–°ã€‚', icon: Trophy, color: 'text-indigo-600', bg: 'bg-indigo-50' },
  { id: 4, title: 'å¯ä¿¡äº‘æœåŠ¡è®¤è¯', description: 'æˆ‘ä»¬çš„æ™ºèƒ½ä½“éƒ¨ç½²ç¯å¢ƒç»è¿‡ä¸¥æ ¼çš„äº‘è®¡ç®—åˆè§„ä¸æ€§èƒ½æµ‹è¯•ã€‚', icon: Verified, color: 'text-emerald-500', bg: 'bg-emerald-50' },
  { id: 5, title: 'äº§å­¦ç ”åˆä½œåŸºåœ°', description: 'ä¸å›½å†… Top 3 é«˜æ ¡å»ºç«‹è”åˆå®éªŒå®¤ï¼ŒæŒç»­è¾“é€å‰æ²¿ AI ç ”ç©¶æˆæœã€‚', icon: Landmark, color: 'text-rose-500', bg: 'bg-rose-50' },
];

const MOCK_TOKEN_HISTORY = [
  { date: '2024-05-15', tokens: 42500, type: 'ç®€å†è§£æ', cost: 'Â¥4.25' },
  { date: '2024-05-16', tokens: 89000, type: 'å¤šæ™ºèƒ½ä½“é¢è¯•', cost: 'Â¥8.90' },
  { date: '2024-05-17', tokens: 12400, type: 'ç”»åƒè°ƒä¼˜', cost: 'Â¥1.24' },
  { date: '2024-05-18', tokens: 56000, type: 'ç®€å†è§£æ', cost: 'Â¥5.60' },
  { date: '2024-05-19', tokens: 92000, type: 'å¤šæ™ºèƒ½ä½“é¢è¯•', cost: 'Â¥9.20' },
  { date: '2024-05-20', tokens: 15000, type: 'å…¨å±€è·¯ç”±', cost: 'Â¥1.50' },
  { date: '2024-05-21', tokens: 34000, type: 'ç®€å†è§£æ', cost: 'Â¥3.40' },
];

const MOCK_USAGE_CHART = [
  { name: '05-15', value: 42500 },
  { name: '05-16', value: 89000 },
  { name: '05-17', value: 12400 },
  { name: '05-18', value: 56000 },
  { name: '05-19', value: 92000 },
  { name: '05-20', value: 15000 },
  { name: '05-21', value: 34000 },
];

interface TodoItem {
  id: string;
  task: string;
  description: string;
  type: 'candidate' | 'employer' | 'system';
  icon: any;
  priority: 'High' | 'Medium' | 'Low';
  aiAdvice: string;
}

const MOCK_TODOS: TodoItem[] = [
  { 
    id: 'todo1', 
    task: 'è®¾ç½®ä¸ªäººèŒä¸šç”»åƒ (å®Œæˆåº¦ 0%)', 
    description: 'é€šè¿‡ä¸Šä¼ ç®€å†å¹¶è§£æï¼Œæ„å»ºæ‚¨çš„å¤šç»´èƒ½åŠ›é›·è¾¾å›¾ã€‚è¿™æ˜¯å¼€å¯ AI æ™ºèƒ½æ¨èçš„ç¬¬ä¸€æ­¥ï¼Œå¸®åŠ©æˆ‘ä»¬çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿç†è§£æ‚¨çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚',
    type: 'candidate', 
    icon: UserIcon,
    priority: 'High',
    aiAdvice: 'ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨æœ€è¿‘åœ¨ Github æ´»è·ƒé¢‘ç¹ï¼Œå»ºè®®åŒæ­¥å¼€æºé¡¹ç›®ç»å†ï¼Œå¯æå‡ç”»åƒå®Œæ•´åº¦ 25%ã€‚'
  },
  { 
    id: 'todo2', 
    task: 'å®Œå–„ä¼ä¸šå“ç‰Œç”»åƒ (å®Œæˆåº¦ 20%)', 
    description: 'å®šä¹‰å…¬å¸çš„æŠ€æœ¯æ ˆåå¥½ä¸å›¢é˜Ÿæ–‡åŒ–ã€‚è¯¦å°½çš„ä¼ä¸šç”»åƒèƒ½æ˜¾è‘—é™ä½ 45% çš„åˆæœŸæ²Ÿé€šæˆæœ¬ï¼Œè®© AI çŒå¤´æ›´ç²¾å‡†åœ°é”å®šç›®æ ‡ã€‚',
    type: 'employer', 
    icon: Building2,
    priority: 'Medium',
    aiAdvice: 'å¢åŠ å…³äºâ€œå¼¹æ€§åŠå…¬â€å’Œâ€œæ™ºèƒ½ååŒâ€çš„å†…å®¹èƒ½æœ‰æ•ˆå¸å¼• A+ çº§åˆ«çš„è¿œç¨‹å¼€å‘è€…ã€‚'
  },
  { 
    id: 'todo3', 
    task: 'é…ç½® AI è‡ªåŠ¨çº¦é¢æ—¶é—´è¡¨', 
    description: 'è®¾ç½®æ‚¨çš„å¯ç”¨æ—¶é—´æ®µã€‚ä¸€æ—¦äººæ‰ä¸å²—ä½åŒ¹é…æˆåŠŸï¼ŒAI è°ƒåº¦æ™ºèƒ½ä½“å°†è‡ªåŠ¨å®Œæˆåˆæ­¥æ²Ÿé€šå¹¶é¢„å®šè™šæ‹Ÿé¢è¯•å®¤ã€‚',
    type: 'system', 
    icon: Calendar,
    priority: 'Low',
    aiAdvice: 'å»ºè®®è‡³å°‘å¼€æ”¾ 3 ä¸ªä¸åŒçš„å·¥ä½œæ—¶æ®µï¼Œä»¥åº”å¯¹ä¸åŒæ—¶åŒºäººæ‰çš„åŒ¹é…éœ€æ±‚ã€‚'
  },
];

interface TalentInfo extends CandidateProfile {
  id: string;
  status: string;
  matchScore: number;
  tokensConsumed?: number;
  targetJobId?: string;
  recentActivity?: string;
}

const MOCK_TALENTS: TalentInfo[] = [
  {
    id: 't1',
    name: 'é™ˆä¼Ÿ',
    role: 'é«˜çº§å…¨æ ˆå·¥ç¨‹å¸ˆ',
    status: 'AI åˆè¯•ä¸­',
    matchScore: 96,
    tokensConsumed: 4250,
    targetJobId: '1',
    experienceYears: 8,
    summary: 'èµ„æ·±äº’è”ç½‘æ¶æ„å¸ˆï¼Œæ“…é•¿åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ with Generative AIã€‚æ‹¥æœ‰æ·±åšçš„å¤§æ¨¡å‹å¾®è°ƒåŠ RAG æ¶æ„å®æ“ç»éªŒã€‚',
    skills: ['React', 'Node.js', 'PyTorch', 'LangChain', 'Docker', 'K8s'],
    recentActivity: 'åˆšåˆšå®Œæˆ AI å‹åŠ›é¢è¯•ï¼Œè¡¨ç°è¯„çº§ï¼šA+',
    radarData: [
      { subject: 'ä¸“ä¸šæŠ€èƒ½', value: 98 },
      { subject: 'æ²Ÿé€šèƒ½åŠ›', value: 85 },
      { subject: 'é—®é¢˜è§£å†³', value: 95 },
      { subject: 'é¢†å¯¼åŠ›', value: 80 },
      { subject: 'é€‚åº”æ€§', value: 90 },
      { subject: 'æŠ€æœ¯æ·±åº¦', value: 97 },
    ],
    idealJobPersona: "å€¾å‘äºåœ¨æŠ€æœ¯é©±åŠ¨å‹å…¬å¸æ‹…ä»»æ ¸å¿ƒæ¶æ„è§’è‰²ã€‚åå¥½æç®€ä¸»ä¹‰çš„å·¥ä½œæµç¨‹ï¼Œè¿½æ±‚èƒ½å¤Ÿå¤§è§„æ¨¡è½åœ° AI æ™ºèƒ½ä½“çš„å¤æ‚ä¸šåŠ¡åœºæ™¯ã€‚",
    interviewQuestions: ["å¦‚ä½•è§£å†³å¤§è§„æ¨¡å¹¶å‘ä¸‹çš„æ¨¡å‹æ¨ç†å»¶è¿Ÿï¼Ÿ", "æè¿°ä¸€æ¬¡ä½ å¤„ç†å¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿå´©æºƒçš„ç»å†ã€‚", "ä½ å¯¹ AI Agent ååŒå·¥ä½œçš„æœªæ¥æ€ä¹ˆçœ‹ï¼Ÿ"],
    optimizationSuggestions: ["å¢åŠ åœ¨ç‰¹å®šå‚ç›´è¡Œä¸šçš„ LLM åº”ç”¨æ¡ˆä¾‹ã€‚", "æå‡å¯¹äºæ–°å‹å¤šæ¨¡æ€æ¨¡å‹çš„ç†è§£ã€‚", "åŠ å¼ºå¯¹äºäº‘åŸç”Ÿæ¶æ„çš„æ·±å…¥æŒæ¡ã€‚"]
  },
  {
    id: 't2',
    name: 'æèŠ³',
    role: 'äº§å“è®¾è®¡ä¸“å®¶',
    status: 'ç®€å†ç­›é€‰',
    matchScore: 89,
    tokensConsumed: 2840,
    targetJobId: '2',
    experienceYears: 6,
    summary: 'å…·å¤‡æ•é”çš„ç”¨æˆ·æ´å¯ŸåŠ›ä¸è¶…å‰çš„è®¾è®¡ç¾å­¦ï¼Œæ“…é•¿å¤æ‚ Bç«¯äº§å“çš„äº¤äº’è®¾è®¡ä¸ä½“éªŒé‡å¡‘ã€‚',
    skills: ['Figma', 'UI/UX', 'Strategy', 'Prototyping', 'User Research'],
    recentActivity: 'ç®€å†è§£æå®Œæˆï¼ŒåŒ¹é…åˆ† 89%ï¼Œå»ºè®®ç›´æ¥è¿›å…¥äºŒé¢',
    radarData: [
      { subject: 'ä¸“ä¸šæŠ€èƒ½', value: 90 },
      { subject: 'æ²Ÿé€šèƒ½åŠ›', value: 95 },
      { subject: 'é—®é¢˜è§£å†³', value: 88 },
      { subject: 'é¢†å¯¼åŠ›', value: 75 },
      { subject: 'é€‚åº”æ€§', value: 92 },
      { subject: 'æŠ€æœ¯æ·±åº¦', value: 80 },
    ],
    idealJobPersona: "å¯»æ±‚å……æ»¡åˆ›æ„æ¿€æƒ…çš„è·¨èŒèƒ½å›¢é˜Ÿï¼Œåå¥½èƒ½å¤Ÿæ·±åº¦å‚ä¸äº§å“ç”Ÿå‘½å‘¨æœŸå¹¶ä¸»å¯¼ç”¨æˆ·ä½“éªŒç­–ç•¥çš„å²—ä½ã€‚ç†æƒ³å·¥ä½œç¯å¢ƒåº”å…·æœ‰é«˜åº¦çš„è®¾è®¡è‡ªç”±åº¦å’Œè·¨éƒ¨é—¨åä½œæ–‡åŒ–ã€‚",
    interviewQuestions: ["å¦‚ä½•å¹³è¡¡è®¾è®¡ç¾æ„Ÿä¸å®é™…ä¸šåŠ¡éœ€æ±‚çš„å†²çªï¼Ÿ", "åˆ†äº«ä¸€ä¸ªä½ ä¸»å¯¼çš„ä» 0 åˆ° 1 çš„è®¾è®¡æ¡ˆä¾‹ã€‚", "ä½ å¦‚ä½•çœ‹å¾… AI åœ¨ UI è®¾è®¡æµç¨‹ä¸­çš„æ›¿ä»£ä½œç”¨ï¼Ÿ"],
    optimizationSuggestions: ["æ›´å¤šåœ°å±•ç¤ºè®¾è®¡å†³ç­–èƒŒåçš„æ•°æ®æ”¯æ’‘ã€‚", "å­¦ä¹ åŸºç¡€çš„å‰ç«¯äº¤äº’ä»£ç å®ç°ã€‚", "å°è¯•è·¨é¢†åŸŸçš„ Cç«¯è®¾è®¡å°è¯•ã€‚"]
  }
];

// --- ä¸šåŠ¡ç»„ä»¶ ---

const MockInterviewConsole = ({ questions, profile }: { questions: string[], profile: CandidateProfile }) => {
  const [messages, setMessages] = useState<{ role: 'ai' | 'user', text: string }[]>([
    { role: 'ai', text: `ä½ å¥½ ${profile.name}ï¼Œæˆ‘æ˜¯ Devnors AI é¢è¯•å®˜ã€‚æˆ‘å·²ç»å®¡é˜…äº†ä½ çš„ç®€å†ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ã€‚ç¬¬ä¸€ä¸ªé—®é¢˜ï¼š${questions[0]}` }
  ]);
  const [input, setInput] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    scrollRef.current?.scrollTo(0, scrollRef.current.scrollHeight);
  }, [messages, isTyping]);

  const handleSend = async () => {
    if (!input.trim() || isTyping) return;
    const userMsg = input;
    setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
    setInput('');
    setIsTyping(true);
    try {
      const history = messages.map(m => ({
        role: m.role === 'ai' ? 'model' : 'user',
        parts: [{ text: m.text }]
      }));
      const aiResponse = await chatWithInterviewer(history, userMsg);
      setMessages(prev => [...prev, { role: 'ai', text: aiResponse }]);
    } catch (err) {
      console.error(err);
    } finally {
      setIsTyping(false);
    }
  };

  return (
    <div className="bg-slate-900 rounded-2xl overflow-hidden border border-slate-800 flex flex-col h-[500px] shadow-2xl">
      <div className="bg-slate-800/50 px-6 py-4 border-b border-slate-700 flex justify-between items-center">
        <div className="flex items-center gap-3">
          <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
          <span className="text-white font-bold text-sm tracking-wide">AI æ¨¡æ‹Ÿé¢è¯•å®å½•</span>
        </div>
      </div>
      <div ref={scrollRef} className="flex-1 overflow-y-auto p-6 space-y-6 scrollbar-hide">
        {messages.map((m, i) => (
          <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
            <div className={`flex gap-3 max-w-[85%] ${m.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>
              <div className={`w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 ${m.role === 'user' ? 'bg-indigo-600' : 'bg-slate-700'}`}>
                {m.role === 'user' ? <UserIcon size={14} className="text-white" /> : <Bot size={14} className="text-indigo-400" />}
              </div>
              <div className={`px-4 py-3 rounded-2xl text-sm leading-relaxed ${m.role === 'user' ? 'bg-indigo-600 text-white rounded-tr-none' : 'bg-slate-800 text-slate-200 rounded-tl-none border border-slate-700'}`}>
                {m.text}
              </div>
            </div>
          </div>
        ))}
        {isTyping && <div className="text-slate-500 text-xs animate-pulse pl-12 font-mono font-black italic">AGENT IS THINKING...</div>}
      </div>
      <div className="p-4 bg-slate-800/30 border-t border-slate-800 flex gap-2">
        <input 
          type="text" value={input} onChange={(e) => setInput(e.target.value)} 
          onKeyDown={(e) => e.key === 'Enter' && handleSend()}
          className="flex-1 bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-sm text-white focus:outline-none focus:ring-1 focus:ring-indigo-500" 
          placeholder="è¾“å…¥æ‚¨çš„å›ç­”..."
        />
        <button onClick={handleSend} className="bg-indigo-600 text-white p-2 rounded-xl flex items-center justify-center">
          <Send size={18}/>
        </button>
      </div>
    </div>
  );
};

// --- åŸºç¡€å¸ƒå±€ç»„ä»¶ ---

const Navbar = () => (
  <nav className="fixed top-0 w-full z-50 glass border-b border-slate-200/50 px-6 py-4">
    <div className="max-w-7xl mx-auto flex justify-between items-center">
      <Link to="/" className="flex items-center space-x-2">
        <div className="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-indigo-200 transition-transform active:scale-95">
          <Zap className="text-white w-6 h-6" />
        </div>
        <span className="text-2xl font-bold tracking-tight text-slate-900">Devnors <span className="text-indigo-600 text-sm font-normal">å¾—è‹¥</span></span>
      </Link>
      <div className="hidden md:flex space-x-8 text-sm font-medium text-slate-600">
        <Link to="/workbench" className="hover:text-indigo-600 transition-colors flex items-center gap-1.5 font-bold"><LayoutDashboard size={16}/> å·¥ä½œå°</Link>
        <Link to="/candidate" className="hover:text-indigo-600 transition-colors">äººæ‰ç«¯</Link>
        <Link to="/employer" className="hover:text-indigo-600 transition-colors">ä¼ä¸šç«¯</Link>
      </div>
      <div className="flex items-center space-x-3">
        <Link to="/tokens" className="flex items-center gap-2 px-3 py-1.5 bg-amber-50 text-amber-600 hover:bg-amber-100 rounded-xl border border-amber-200 transition-all group" title="Token èµ„äº§ç®¡ç†">
          <div className="p-1 bg-white rounded-lg shadow-sm group-hover:rotate-12 transition-transform">
             <CircleDollarSign size={14} className="text-amber-500" />
          </div>
          <span className="text-xs font-black">1.2M</span>
        </Link>
        <div className="w-px h-6 bg-slate-200 mx-1"></div>
        <Link to="/settings" className="p-2 text-slate-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-xl transition-all" title="ç³»ç»Ÿè®¾ç½®"><Settings size={18}/></Link>
        <Link to="/login" className="text-sm font-bold text-slate-600 hover:text-indigo-600 px-3 transition-colors">ç™»å½•</Link>
        <button className="bg-slate-900 hover:bg-slate-800 text-white px-5 py-2.5 rounded-xl text-sm font-bold shadow-lg active:scale-95 transition-all">ç«‹å³å¼€å§‹</button>
      </div>
    </div>
  </nav>
);

const LandingPage = () => (
  <div className="pt-20">
    <Hero />

    {/* æ–°å¢ï¼šæ ¸å¿ƒç¤¾äº¤è¯æ˜æ¿å— (Market Presence) */}
    <section className="py-16 px-6 -mt-10 mb-10">
      <div className="max-w-6xl mx-auto">
        <div className="bg-white rounded-[3rem] p-10 md:p-16 border border-slate-100 shadow-2xl relative overflow-hidden group">
           <div className="absolute top-0 right-0 p-20 opacity-[0.02] pointer-events-none group-hover:scale-110 transition-transform duration-1000">
             <Globe size={400} className="text-indigo-600" />
           </div>
           <div className="grid grid-cols-1 md:grid-cols-3 gap-12 relative z-10">
             <div className="text-center md:border-r border-slate-100">
                <div className="inline-flex p-3 bg-indigo-50 rounded-2xl text-indigo-600 mb-6"><Users size={32} /></div>
                <div className="text-5xl font-black text-slate-900 mb-2 tracking-tighter">100ä¸‡<span className="text-indigo-600">+</span></div>
                <div className="text-sm font-bold text-slate-400 uppercase tracking-widest">å…¨çƒå‚¨å¤‡äººæ‰</div>
             </div>
             <div className="text-center md:border-r border-slate-100">
                <div className="inline-flex p-3 bg-emerald-50 rounded-2xl text-emerald-600 mb-6"><Building2 size={32} /></div>
                <div className="text-5xl font-black text-slate-900 mb-2 tracking-tighter">2ä¸‡<span className="text-emerald-600">+</span></div>
                <div className="text-sm font-bold text-slate-400 uppercase tracking-widest">æ´»è·ƒå…¥é©»ä¼ä¸š</div>
             </div>
             <div className="text-center">
                <div className="inline-flex p-3 bg-rose-50 rounded-2xl text-rose-600 mb-6"><Sparkles size={32} /></div>
                <div className="text-5xl font-black text-slate-900 mb-2 tracking-tighter">500ä¸‡<span className="text-rose-600">+</span></div>
                <div className="text-sm font-bold text-slate-400 uppercase tracking-widest">AI æ™ºèƒ½æˆåŠŸå¯¹æ¥</div>
             </div>
           </div>
        </div>
      </div>
    </section>

    <section className="py-20 px-6">
      <div className="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
        <FeatureCard 
          icon={Zap}
          title="æ™ºèƒ½ä½“å…¨æµç¨‹è‡ªæ²»"
          description="é¦–åˆ›â€œæ™ºèƒ½ä½“åŸç”Ÿâ€æ¨¡å¼ï¼Œç®€å†è‡ªæŠ•é€’ã€å²—ä½è‡ªæ¨èã€é¢è¯•è‡ªè°ƒåº¦ï¼Œå®ç°åŒå‘è‡ªåŠ¨åŒ–ã€‚"
        />
        <FeatureCard 
          icon={BarChart3}
          title="å¤šæ¨¡æ€äººæ‰è¯„ä¼°"
          description="èåˆå¾®è¡¨æƒ…åˆ†æã€è¯­éŸ³æƒ…æ„Ÿä¸æ–‡æœ¬é€»è¾‘ï¼Œæ„å»ºå…­ç»´åŠ¨æ€èƒ½åŠ›é›·è¾¾å›¾ï¼Œä¸€è‡´ç‡é«˜è¾¾ 90.1%ã€‚"
        />
        <FeatureCard 
          icon={ShieldCheck}
          title="æŠ—åè§å…¬å¹³ç®—æ³•"
          description="é€šè¿‡å¯¹æŠ—æ€§å»åæŠ€æœ¯æ¶ˆé™¤æ½œåœ¨æ­§è§†ï¼Œç¡®ä¿æ‹›è˜å›å½’èƒ½åŠ›æœ¬è´¨ï¼Œæå‡ 45% çš„æ‹›è˜å…¬å¹³æ€§ã€‚"
        />
      </div>
    </section>
    
    <section className="py-24 px-6 bg-indigo-600/5 border-y border-indigo-100/50">
      <div className="max-w-7xl mx-auto text-center">
        <h2 className="text-3xl font-bold mb-16 text-slate-900">é‡åŒ–æ•ˆç‡æ ‡æ†</h2>
        <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
          {[
            { label: 'æ•ˆç‡è·¨è¶Šå¼æå‡', value: '578%' },
            { label: 'åŒ¹é…ç²¾åº¦', value: '82%' },
            { label: 'HR äººåŠ›æˆæœ¬é™ä½', value: '70%' },
            { label: 'æ‹›è˜å‘¨æœŸ', value: '< 48h' },
          ].map((stat, i) => (
            <div key={i} className="p-8 bg-white rounded-2xl border border-indigo-50/50 card-shadow">
              <div className="text-5xl font-extrabold text-indigo-600 mb-2">{stat.value}</div>
              <div className="text-slate-500 font-semibold">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </section>
  </div>
);

const Hero = () => (
  <section className="pt-32 pb-20 px-6 overflow-hidden">
    <div className="max-w-7xl mx-auto text-center relative">
      <div className="absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-indigo-500/5 blur-[120px] -z-10 rounded-full"></div>
      <div className="inline-flex items-center space-x-2 bg-indigo-50/80 border border-indigo-100 px-4 py-1.5 rounded-full text-indigo-600 text-sm font-medium mb-8">
        <Sparkles size={14} />
        <span>æ•ˆç‡æå‡ 578%ï¼šå¤šæ™ºèƒ½ä½“é©±åŠ¨æ‹›è˜æ–°çºªå…ƒ</span>
      </div>
      <h1 className="text-5xl md:text-7xl font-extrabold mb-8 leading-tight text-slate-900 tracking-tight">
        é‡å¡‘ <span className="gradient-text">AI é©±åŠ¨</span> çš„ <br />
        äººæ‰æ‹›è˜æ–°èŒƒå¼
      </h1>
      <p className="text-xl text-slate-600 max-w-3xl mx-auto mb-12 leading-relaxed">
        ä»â€œäººå²—åŒ¹é…â€åˆ°â€œæ™ºèƒ½ä½“è‡ªä¸»ååŒâ€ã€‚Devnors éƒ¨ç½²å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆMASï¼‰ï¼Œ
        å®ç°ä»ç®€å†æ·±åº¦è§£æã€å¤šæ¨¡æ€è¯„ä¼°åˆ°é¢è¯•è‡ªè°ƒåº¦çš„å…¨é“¾è·¯é—­ç¯ã€‚
      </p>
      <div className="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4">
        <Link to="/candidate" className="w-full sm:w-auto bg-slate-900 text-white px-8 py-4 rounded-xl font-bold hover:bg-slate-800 transition-all flex items-center justify-center space-x-2 shadow-xl shadow-slate-200">
          <span>ä½œä¸ºäººæ‰åŠ å…¥</span>
          <ArrowRight size={18} />
        </Link>
        <Link to="/employer" className="w-full sm:w-auto bg-white border border-slate-200 text-slate-900 px-8 py-4 rounded-xl font-bold hover:bg-slate-50 transition-all flex items-center justify-center space-x-2 shadow-sm">
          <span>ä¼ä¸šä¸€é”®æ‰˜ç®¡</span>
          <Briefcase size={18} />
        </Link>
      </div>
    </div>
  </section>
);

const FeatureCard = ({ icon: Icon, title, description }: any) => (
  <div className="bg-white p-8 rounded-2xl hover:translate-y-[-4px] transition-all border border-slate-100 card-shadow group">
    <div className="w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center mb-6 group-hover:bg-indigo-600 transition-colors">
      <Icon className="text-indigo-600 w-6 h-6 group-hover:text-white transition-colors" />
    </div>
    <h3 className="text-xl font-bold mb-4 text-slate-900">{title}</h3>
    <p className="text-slate-500 leading-relaxed">{description}</p>
  </div>
);

// --- è®¾ç½®ä¸ç®¡ç†é¡µé¢ ---
const SettingsManagementView = () => {
  const [activeTab, setActiveTab] = useState<'General' | 'Account' | 'AIEngine' | 'API' | 'Team' | 'Audit'>('General');
  const [accountTier, setAccountTier] = useState<AccountTier>('Professional');
  const isEmployer = true; // æ¨¡æ‹Ÿå½“å‰ä¸ºä¼ä¸šèº«ä»½

  const teamMembers: TeamMember[] = [
    { id: 'm1', name: 'ç‹ç»ç†', email: 'wang@devnors.com', role: 'Admin', status: 'Active' },
    { id: 'm2', name: 'æçŒå¤´', email: 'li@devnors.com', role: 'Recruiter', status: 'Active' },
    { id: 'm3', name: 'é™ˆåŠ©ç†', email: 'chen@devnors.com', role: 'Viewer', status: 'Invited' },
  ];

  const llmConfigs: CustomLLMConfig[] = [
    { task: 'ç®€å†è¯­ä¹‰è§£æ', modelName: 'Gemini 3 Pro', provider: 'Google' },
    { task: 'å¤šæ™ºèƒ½ä½“è”å¸­é¢è¯•', modelName: 'GPT-4o', provider: 'OpenAI' },
    { task: 'å…¨å±€æœºä¼šè·¯ç”±', modelName: 'Claude 3.5 Sonnet', provider: 'Anthropic' },
  ];

  const navItems = [
    { id: 'General', label: 'åŸºç¡€ä¿¡æ¯', icon: UserCircle2 },
    { id: 'Account', label: 'è´¦æˆ·ç­‰çº§', icon: Award },
    { id: 'AIEngine', label: 'AI å¼•æ“é…ç½®', icon: Cpu },
    { id: 'API', label: 'API ä¸é›†æˆ', icon: Key },
    ...(isEmployer ? [{ id: 'Team', label: 'äººå‘˜ä¸æƒé™', icon: Users2 }] : []),
    { id: 'Audit', label: 'å®‰å…¨å®¡è®¡æ—¥å¿—', icon: Laptop },
  ];

  const renderContent = () => {
    switch (activeTab) {
      case 'General':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <h3 className="text-2xl font-black text-slate-900 flex items-center gap-3">åŸºç¡€ä¿¡æ¯è®¾ç½®</h3>
            <div className="bg-white rounded-[2rem] p-10 border border-slate-100 shadow-sm space-y-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">æ˜¾ç¤ºåç§° / ä¼ä¸šå…¨ç§°</label>
                  <input type="text" defaultValue="å¾—è‹¥æ™ºèƒ½ç§‘æŠ€" className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3.5 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20" />
                </div>
                <div>
                  <label className="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2">ç®¡ç†è”ç³»é‚®ç®±</label>
                  <input type="email" defaultValue="admin@devnors.com" className="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3.5 text-sm font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/20" />
                </div>
              </div>
              <div className="p-6 bg-indigo-50 rounded-2xl border border-indigo-100">
                <div className="flex items-center justify-between">
                  <div>
                    <h4 className="text-sm font-black text-indigo-900 flex items-center gap-2"><Bell size={16}/> æ™ºèƒ½æ¶ˆæ¯æ¨é€</h4>
                    <p className="text-xs text-indigo-700/70 mt-1 font-medium">å½“æ™ºèƒ½ä½“å®Œæˆç®€å†åˆç­›æˆ–çº¦é¢æˆåŠŸæ—¶ï¼Œé€šè¿‡é‚®ä»¶å³æ—¶é€šçŸ¥ã€‚</p>
                  </div>
                  <div className="w-12 h-6 bg-indigo-600 rounded-full relative cursor-pointer"><div className="absolute right-1 top-1 w-4 h-4 bg-white rounded-full"></div></div>
                </div>
              </div>
              <div className="pt-4 flex justify-end">
                <button className="bg-slate-900 text-white px-8 py-3.5 rounded-xl font-black text-sm hover:bg-slate-800 transition-all flex items-center gap-2">
                  <Save size={18} /> ä¿å­˜æ›´æ”¹ä¿¡æ¯
                </button>
              </div>
            </div>
          </div>
        );
      case 'Account':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <h3 className="text-2xl font-black text-slate-900 flex items-center gap-3">è´¦æˆ·ç­‰çº§ä¸ç‰¹æƒ</h3>
            <div className="bg-white rounded-[2rem] p-10 border border-slate-100 shadow-sm">
              <div className="flex flex-col md:flex-row items-center gap-10">
                <div className="w-full md:w-1/3 bg-slate-900 rounded-[2rem] p-8 text-white relative overflow-hidden">
                  <Zap className="absolute -right-6 -bottom-6 w-32 h-32 opacity-10" />
                  <div className="text-[10px] font-black uppercase text-indigo-400 mb-4">å½“å‰æ–¹æ¡ˆ</div>
                  <div className="text-4xl font-black mb-2">{accountTier}</div>
                  <p className="text-slate-400 text-xs font-medium mb-8">é€‚ç”¨äºä¸­å‹ä»¥ä¸Šè§„æ¨¡çš„ AI é©±åŠ¨å›¢é˜Ÿ</p>
                  <button className="w-full py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl text-xs font-black transition-all">ç»­è´¹å½“å‰å¥—é¤</button>
                </div>
                <div className="flex-1 space-y-6">
                  <h4 className="text-lg font-black">åŒ…å«çš„æ ¸å¿ƒç‰¹æƒ</h4>
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {['æ— é™åˆ¶ç®€å†ç»“æ„åŒ–è§£æ', 'è‡ªå®šä¹‰å¤š LLM ç”¨æˆ·è·¯ç”±ç­–ç•¥', 'API å¯¹å¤–è°ƒç”¨æƒé™', 'å›¢é˜Ÿæˆå‘˜æ— é™åˆ¶åä½œ', 'ä¸“å±æ™ºèƒ½ä½“éƒ¨ç½²é€šé“', '24/7 æŠ€æœ¯ä¸“å®¶æ”¯æŒ'].map((p, i) => (
                      <div key={i} className="flex items-center gap-3 text-sm font-bold text-slate-600">
                        <CheckCircle2 size={18} className="text-emerald-500 flex-shrink-0" /> {p}
                      </div>
                    ))}
                  </div>
                  <div className="pt-6">
                    <button className="bg-indigo-600 text-white px-8 py-4 rounded-xl font-black text-sm shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2">
                      å‡çº§åˆ° Enterprise æ——èˆ°ç‰ˆ <ArrowUpRight size={18} />
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        );
      case 'AIEngine':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <h3 className="text-2xl font-black text-slate-900 flex items-center gap-3">AI ä»»åŠ¡å¼•æ“è‡ªå®šä¹‰</h3>
            <p className="text-slate-500 font-medium -mt-4">æ ¹æ®ä¸åŒæ‹›è˜ä»»åŠ¡çš„å¤æ‚åº¦å’Œæˆæœ¬ï¼Œçµæ´»é…ç½®åº•å±‚å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨ã€‚</p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
              {llmConfigs.map((config, i) => (
                <div key={i} className="p-8 bg-white rounded-[2rem] border border-slate-100 shadow-sm hover:border-indigo-200 transition-all group">
                   <div className="flex justify-between items-start mb-6">
                      <div>
                        <div className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1">{config.task}</div>
                        <div className="text-xl font-black text-slate-900">{config.modelName}</div>
                      </div>
                      <div className="p-2 bg-indigo-50 rounded-xl text-indigo-600"><Bot size={20} /></div>
                   </div>
                   <div className="flex items-center justify-between pt-6 border-t border-slate-50">
                      <span className="text-xs font-black text-slate-400 uppercase">Provider: <span className="text-indigo-600 ml-1">{config.provider}</span></span>
                      <button className="p-2.5 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all"><Edit3 size={16} /></button>
                   </div>
                </div>
              ))}
              <button className="border-2 border-dashed border-slate-200 rounded-[2rem] p-8 flex flex-col items-center justify-center gap-4 hover:bg-white hover:border-indigo-200 transition-all group">
                 <div className="w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:bg-indigo-50 transition-all"><Plus size={24} /></div>
                 <span className="text-xs font-black text-slate-400 uppercase tracking-widest">æ·»åŠ è‡ªå®šä¹‰ä»»åŠ¡æ˜ å°„</span>
              </button>
            </div>
          </div>
        );
      case 'API':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <div className="flex justify-between items-end">
              <div>
                <h3 className="text-2xl font-black text-slate-900">API ä¸ Webhooks é›†æˆ</h3>
                <p className="text-slate-500 font-medium mt-1">å°† Devnors æ™ºèƒ½æ‹›è˜èƒ½åŠ›æ·±åº¦åµŒå…¥æ‚¨çš„ä¸šåŠ¡æµç¨‹ä¸­ã€‚</p>
              </div>
              <button className="bg-slate-900 text-white px-6 py-2.5 rounded-xl font-black text-xs">æŸ¥çœ‹ API æ–‡æ¡£</button>
            </div>
            <div className="space-y-6">
              <div className="bg-slate-900 rounded-[2rem] p-8 text-white shadow-xl relative overflow-hidden group">
                 <div className="absolute top-0 right-0 p-10 opacity-5 group-hover:scale-110 transition-transform"><Key size={140} /></div>
                 <div className="relative z-10">
                    <div className="text-[10px] font-black uppercase text-indigo-400 mb-4 tracking-widest flex items-center gap-2">
                       <ShieldCheck size={12} /> Production Environment Key
                    </div>
                    <div className="flex flex-col md:flex-row items-center gap-6">
                       <div className="flex-1 bg-white/5 border border-white/10 rounded-2xl px-6 py-4 font-mono text-lg tracking-tighter text-indigo-200 truncate w-full">
                          devnors_sk_live_f7a8b9c0d1e2f3g4h5i6j7k8l9m0
                       </div>
                       <button className="bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-2xl font-black text-sm transition-all whitespace-nowrap">
                          å¤åˆ¶ API Key
                       </button>
                    </div>
                    <p className="mt-6 text-xs text-slate-500 font-medium">è¯·å¦¥å–„ä¿ç®¡æ‚¨çš„å¯†é’¥ã€‚å¦‚å‘ç”Ÿæ³„éœ²ï¼Œè¯·ç«‹å³é‡æ–°ç”Ÿæˆã€‚</p>
                 </div>
              </div>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div className="bg-white rounded-3xl p-8 border border-slate-100 shadow-sm">
                   <h4 className="text-base font-black text-slate-900 mb-2">äº‹ä»¶é€šçŸ¥ Webhooks</h4>
                   <p className="text-xs text-slate-500 font-medium mb-6">å½“ç³»ç»Ÿå†…å‘ç”Ÿå…³é”®æ‹›è˜èŠ‚ç‚¹å˜åŒ–æ—¶ï¼ˆå¦‚é¢è¯•é€šè¿‡ï¼‰ï¼Œä¸»åŠ¨å‘æ‚¨çš„æœåŠ¡å™¨å‘é€æ•°æ®ã€‚</p>
                   <button className="w-full py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-black text-slate-600 hover:bg-white hover:border-indigo-600 hover:text-indigo-600 transition-all">
                      é…ç½® Webhook ç«¯ç‚¹
                   </button>
                </div>
                <div className="bg-white rounded-3xl p-8 border border-slate-100 shadow-sm">
                   <h4 className="text-base font-black text-slate-900 mb-2">ç»“æ„åŒ–æ•°æ®å¯¼å‡º API</h4>
                   <p className="text-xs text-slate-500 font-medium mb-6">é€šè¿‡ REST æ¥å£è·å–å·²è§£æçš„äººæ‰ç”»åƒæ•°æ®ï¼Œæ”¯æŒ JSON/PDF æ ¼å¼æµå¼å¯¼å‡ºã€‚</p>
                   <button className="w-full py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs font-black text-slate-600 hover:bg-white hover:border-indigo-600 hover:text-indigo-600 transition-all">
                      ç”Ÿæˆä¸´æ—¶è®¿é—®ä»¤ç‰Œ
                   </button>
                </div>
              </div>
            </div>
          </div>
        );
      case 'Team':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <div className="flex justify-between items-center">
              <h3 className="text-2xl font-black text-slate-900">å›¢é˜Ÿæˆå‘˜ä¸æƒé™æ§åˆ¶</h3>
              <button className="bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-sm flex items-center gap-2 shadow-lg shadow-indigo-100 active:scale-95 transition-all">
                <UserPlus size={18} /> é‚€è¯·æ–°æˆå‘˜
              </button>
            </div>
            <div className="bg-white rounded-[2rem] border border-slate-100 shadow-sm overflow-hidden">
               <div className="overflow-x-auto">
                  <table className="w-full text-left">
                     <thead>
                        <tr className="bg-slate-50/50 border-b border-slate-50 text-[10px] uppercase font-black tracking-widest text-slate-400">
                           <th className="py-4 pl-10">æˆå‘˜ä¿¡æ¯</th>
                           <th className="py-4">è§’è‰²</th>
                           <th className="py-4">æœ€è¿‘æ´»è·ƒ</th>
                           <th className="py-4 text-right pr-10">ç®¡ç†æ“ä½œ</th>
                        </tr>
                     </thead>
                     <tbody className="divide-y divide-slate-50">
                        {teamMembers.map((member) => (
                          <tr key={member.id} className="group hover:bg-slate-50/30 transition-colors">
                             <td className="py-6 pl-10">
                                <div className="flex items-center gap-4">
                                   <div className="w-11 h-11 rounded-xl bg-slate-100 flex items-center justify-center font-black text-slate-400 border border-slate-200">{member.name.charAt(0)}</div>
                                   <div>
                                      <div className="text-sm font-black text-slate-900">{member.name}</div>
                                      <div className="text-xs text-slate-400 font-medium">{member.email}</div>
                                   </div>
                                </div>
                             </td>
                             <td className="py-6">
                                <span className={`px-3 py-1 rounded-lg text-[10px] font-black uppercase ${
                                   member.role === 'Admin' ? 'bg-rose-50 text-rose-600' : 'bg-indigo-50 text-indigo-600'
                                }`}>
                                   {member.role}
                                </span>
                             </td>
                             <td className="py-6">
                                <div className="flex items-center gap-2">
                                   <div className={`w-2 h-2 rounded-full ${member.status === 'Active' ? 'bg-emerald-500 animate-pulse' : 'bg-slate-300'}`}></div>
                                   <span className="text-xs font-bold text-slate-600">3 å°æ—¶å‰æ´»è·ƒ</span>
                                </div>
                             </td>
                             <td className="py-6 text-right pr-10">
                                <div className="flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                   <button className="p-2 text-slate-400 hover:text-indigo-600 transition-colors"><ShieldAlert size={18} /></button>
                                   <button className="p-2 text-slate-400 hover:text-rose-600 transition-colors"><Trash2 size={18} /></button>
                                </div>
                             </td>
                          </tr>
                        ))}
                     </tbody>
                  </table>
               </div>
            </div>
          </div>
        );
      case 'Audit':
        return (
          <div className="space-y-8 animate-in fade-in duration-500">
            <h3 className="text-2xl font-black text-slate-900 flex items-center gap-3">ç³»ç»Ÿæ“ä½œå®¡è®¡æ—¥å¿—</h3>
            <div className="bg-white rounded-[2rem] p-10 border border-slate-100 shadow-sm space-y-6">
               <div className="flex items-center gap-6 p-6 bg-slate-50 rounded-2xl border border-slate-100">
                  <div className="w-14 h-14 bg-white rounded-xl flex items-center justify-center shadow-sm text-slate-400"><Laptop size={24} /></div>
                  <div className="flex-1">
                     <h4 className="text-base font-black text-slate-900">å®‰å…¨æ€§ç›‘æ§</h4>
                     <p className="text-sm text-slate-500 font-medium mt-1">æ‚¨å¯ä»¥æŸ¥çœ‹å¹¶ç›‘æ§å¹³å°å†…æ‰€æœ‰æˆå‘˜ã€æ™ºèƒ½ä½“ä»¥åŠ API çš„è°ƒç”¨è¶³è¿¹ï¼Œç¡®ä¿æ‹›è˜è¿‡ç¨‹ 100% åˆè§„ä¸å¯æº¯æºã€‚</p>
                  </div>
               </div>
               <div className="space-y-4">
                  {[
                    { action: 'API Key è¢«ç”¨äºå¯¼å‡ºç®€å†', user: 'System Bot', time: '10åˆ†é’Ÿå‰', ip: '192.168.1.1' },
                    { action: 'è´¦æˆ·è®¾ç½®è¢«ä¿®æ”¹: è”ç³»é‚®ç®±', user: 'ç‹ç»ç†', time: '2å°æ—¶å‰', ip: '172.16.0.42' },
                    { action: 'æ–°æˆå‘˜è¢«é‚€è¯·åŠ å…¥å›¢é˜Ÿ', user: 'ç‹ç»ç†', time: '1å¤©å‰', ip: '172.16.0.42' },
                  ].map((log, idx) => (
                    <div key={idx} className="flex items-center justify-between py-4 border-b border-slate-50 last:border-0 px-4 group hover:bg-slate-50 transition-colors rounded-xl">
                       <div className="flex items-center justify-between w-full">
                          <div className="flex items-center gap-4">
                             <div className="text-xs font-black text-slate-900">{log.action}</div>
                             <span className="text-[10px] font-black text-slate-400 uppercase tracking-tighter bg-slate-100 px-2 py-0.5 rounded">BY {log.user}</span>
                          </div>
                          <div className="flex items-center gap-6 text-[10px] font-bold text-slate-400">
                             <span>IP: {log.ip}</span>
                             <span>{log.time}</span>
                          </div>
                       </div>
                    </div>
                  ))}
               </div>
               <button className="w-full mt-4 py-3 bg-slate-900 text-white font-black text-sm rounded-xl active:scale-95 transition-all">
                  ä¸‹è½½å®Œæ•´å®¡è®¡å†å² (.CSV)
               </button>
            </div>
          </div>
        );
      default:
        return null;
    }
  };

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto min-h-screen animate-in fade-in duration-700">
      <div className="mb-12">
         <h1 className="text-4xl font-black text-slate-900 flex items-center gap-4">
           <div className="p-3 bg-slate-900 text-white rounded-2xl shadow-xl"><Settings size={32} /></div>
           ç³»ç»Ÿè®¾ç½®
         </h1>
         <p className="text-slate-500 font-medium mt-2">åœ¨è¿™é‡Œä¸ªæ€§åŒ–æ‚¨çš„æ™ºèƒ½æ‹›è˜ä½“éªŒï¼Œç®¡ç†åº•å±‚å¼•æ“ä¸å›¢é˜Ÿæƒé™</p>
      </div>

      <div className="flex flex-col lg:flex-row gap-12 items-start">
        {/* å·¦ä¾§å¯¼èˆªèœå• */}
        <aside className="w-full lg:w-72 flex-shrink-0 space-y-2 sticky top-28">
           <div className="bg-white rounded-[2rem] p-4 border border-slate-100 shadow-sm space-y-1">
              {navItems.map((item) => (
                <button
                  key={item.id}
                  onClick={() => setActiveTab(item.id as any)}
                  className={`w-full flex items-center gap-3 px-5 py-4 rounded-2xl font-black text-sm transition-all group ${
                    activeTab === item.id 
                    ? 'bg-indigo-600 text-white shadow-xl shadow-indigo-100 translate-x-2' 
                    : 'text-slate-500 hover:bg-slate-50 hover:text-indigo-600'
                  }`}
                >
                  <item.icon size={20} className={`${activeTab === item.id ? 'text-white' : 'text-slate-400 group-hover:text-indigo-600'} transition-colors`} />
                  {item.label}
                  {activeTab === item.id && <ChevronRight size={16} className="ml-auto animate-pulse" />}
                </button>
              ))}
           </div>
           
           <div className="p-8 bg-slate-900 rounded-[2.5rem] text-white relative overflow-hidden mt-6">
              <Sparkle className="absolute -right-4 -bottom-4 w-24 h-24 text-white/5" />
              <div className="text-[10px] font-black uppercase text-indigo-400 mb-3 tracking-widest">ç³»ç»ŸçŠ¶æ€</div>
              <div className="flex items-center gap-2 mb-4">
                 <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                 <span className="text-sm font-black uppercase tracking-tighter">MAS Active</span>
              </div>
              <p className="text-[11px] text-slate-400 leading-relaxed font-medium italic">â€œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿè¿è¡Œè‰¯å¥½ï¼Œæ‰€æœ‰è®¾ç½®æ˜ å°„å·²åŒæ­¥è‡³è¾¹ç¼˜èŠ‚ç‚¹ã€‚â€</p>
           </div>
        </aside>

        {/* å³ä¾§åŠŸèƒ½å†…å®¹åŒº */}
        <main className="flex-1 w-full min-w-0">
           <div className="relative">
              {renderContent()}
           </div>
        </main>
      </div>
    </div>
  );
};

// --- Token ä¸èµ„é‡‘ç®¡ç†é¡µé¢ ---
const TokenManagementView = () => {
  const navigate = useNavigate();
  const [balance, setBalance] = useState(1245000); // 1.2M tokens
  const [rechargeAmount, setRechargeAmount] = useState<number | null>(null);

  const packages = [
    { name: 'å…¥é—¨ä½“éªŒ', tokens: '100,000', price: 99, discount: null, accent: 'bg-indigo-50' },
    { name: 'ç²¾è‹±çŒè˜', tokens: '1,000,000', price: 799, discount: 'æ€§ä»·æ¯”æœ€é«˜', accent: 'bg-amber-50' },
    { name: 'ä¼ä¸šæ——èˆ°', tokens: '10,000,000', price: 6999, discount: '-20%', accent: 'bg-rose-50' },
  ];

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-700">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 mb-8 font-black transition-colors">
        <ChevronLeft size={20} /> è¿”å›
      </button>

      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-6">
        <div>
          <h1 className="text-4xl font-black text-slate-900 mb-2 flex items-center gap-4">
             <div className="p-3 bg-amber-500 text-white rounded-2xl shadow-xl rotate-3"><CircleDollarSign size={28}/></div>
             èµ„é‡‘è´¦æˆ·
          </h1>
          <p className="text-slate-500 font-medium tracking-tight">ç®¡ç†å¤šæ™ºèƒ½ä½“åä½œæ‰€éœ€çš„ Token ç‡ƒæ–™ä¸è´¦æˆ·èµ„é‡‘</p>
        </div>
        <div className="flex gap-4">
           <button className="bg-slate-900 text-white px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 shadow-xl hover:bg-slate-800 transition-all">
             <Download size={18}/> ä¸‹è½½æœˆåº¦å¯¹è´¦å•
           </button>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
        <div className="bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-[2.5rem] p-10 text-white shadow-2xl relative overflow-hidden group">
           <div className="absolute top-0 right-0 p-10 opacity-20 group-hover:scale-110 transition-transform"><Gem size={140} /></div>
           <div className="relative z-10">
             <div className="text-indigo-200 text-xs font-black uppercase tracking-widest mb-4 flex items-center gap-2">
               <div className="w-1.5 h-1.5 bg-amber-400 rounded-full animate-pulse"></div> å¯ç”¨ Token ä½™é¢
             </div>
             <div className="text-6xl font-black mb-6 tracking-tighter">{(balance/1000000).toFixed(2)}M</div>
             <div className="flex items-center gap-2 text-indigo-100 font-bold text-sm bg-black/10 px-4 py-2 rounded-full w-fit">
                <Clock size={16} /> é¢„è®¡å¯ç»­èˆª <span className="text-amber-400 ml-1">42 å¤©</span>
             </div>
           </div>
        </div>
        
        <div className="bg-white rounded-[2.5rem] p-10 border border-slate-100 card-shadow flex flex-col justify-between group">
           <div>
             <div className="text-slate-400 text-xs font-black uppercase tracking-widest mb-4">ä»Šæ—¥æ™ºèƒ½ä½“è´Ÿè½½æ¶ˆè€—</div>
             <div className="text-4xl font-black text-slate-900 flex items-baseline gap-2">
               42,500 <span className="text-sm font-bold text-slate-300 uppercase tracking-tighter">Tokens</span>
             </div>
           </div>
           <div className="mt-8 flex items-center gap-2 text-rose-500 font-black text-sm bg-rose-50 px-4 py-1.5 rounded-full w-fit">
             <TrendingUp size={16} /> æ¶ˆè€—ç¯æ¯”ä¸Šå‡ 12.5%
           </div>
        </div>

        <div className="bg-white rounded-[2.5rem] p-10 border border-slate-100 card-shadow flex flex-col justify-between">
           <div>
             <div className="text-slate-400 text-xs font-black uppercase tracking-widest mb-4">è´¦æˆ·ç´¯è®¡å……å€¼</div>
             <div className="text-4xl font-black text-slate-900 tracking-tight">Â¥ 12,450.00</div>
           </div>
           <div className="mt-8">
              <button className="text-indigo-600 font-black text-sm flex items-center gap-1 hover:gap-2 transition-all">
                ç®¡ç†æ”¯ä»˜æ–¹å¼ <ArrowRight size={14} />
              </button>
           </div>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
        <div className="lg:col-span-8 space-y-10">
           {/* æ¶ˆè€—è¶‹åŠ¿å›¾ */}
           <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow">
              <div className="flex justify-between items-center mb-10">
                 <h3 className="text-xl font-black text-slate-900 flex items-center gap-3">
                   <Activity className="text-indigo-600" /> Token èµ„æºæ¶ˆè€—åˆ†å¸ƒ (è¿‘ 7 æ—¥)
                 </h3>
                 <div className="flex gap-2">
                    <span className="px-3 py-1 bg-indigo-50 text-indigo-600 text-[10px] font-black rounded-lg uppercase">å³°å€¼: 92k</span>
                    <span className="px-3 py-1 bg-slate-50 text-slate-400 text-[10px] font-black rounded-lg uppercase">å‡å€¼: 45k</span>
                 </div>
              </div>
              <div className="h-[320px] w-full">
                 <ResponsiveContainer width="100%" height="100%">
                   <AreaChart data={MOCK_USAGE_CHART}>
                     <defs>
                       <linearGradient id="colorValue" x1="0" x2="0" y2="1">
                         <stop offset="5%" stopColor="#6366f1" stopOpacity={0.3}/>
                         <stop offset="95%" stopColor="#6366f1" stopOpacity={0}/>
                       </linearGradient>
                     </defs>
                     <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f1f5f9" />
                     <XAxis dataKey="name" axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 10, fontWeight: 700}} />
                     <YAxis axisLine={false} tickLine={false} tick={{fill: '#94a3b8', fontSize: 10, fontWeight: 700}} />
                     <Tooltip 
                       contentStyle={{backgroundColor: '#0f172a', borderRadius: '20px', border: 'none', color: '#fff', padding: '12px'}}
                       itemStyle={{color: '#818cf8', fontWeight: 900}}
                       cursor={{stroke: '#6366f1', strokeWidth: 2, strokeDasharray: '5 5'}}
                     />
                     <Area type="monotone" dataKey="value" stroke="#6366f1" strokeWidth={4} fillOpacity={1} fill="url(#colorValue)" animationDuration={2000} />
                   </AreaChart>
                 </ResponsiveContainer>
              </div>
           </div>

           {/* æ¶ˆè€—è¯¦æƒ… */}
           <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow overflow-hidden">
              <h3 className="text-xl font-black text-slate-900 mb-8 flex items-center gap-3">
                <History className="text-indigo-600" /> æ•°å­—èƒ½æºæ¶ˆè€—æµæ°´ (Transaction Logs)
              </h3>
              <div className="overflow-x-auto">
                 <table className="w-full text-left">
                    <thead>
                       <tr className="border-b border-slate-50 text-[10px] uppercase font-black tracking-widest text-slate-400">
                          <th className="pb-4 pl-2">å‘ç”Ÿæ—¶é—´</th>
                          <th className="pb-4">æ“ä½œç±»å‹</th>
                          <th className="pb-4 text-center">Token æ¶ˆè€—</th>
                          <th className="pb-4 text-right pr-2">è´¹ç”¨å‚è€ƒ</th>
                       </tr>
                    </thead>
                    <tbody className="divide-y divide-slate-50">
                       {MOCK_TOKEN_HISTORY.map((h, i) => (
                         <tr key={i} className="group hover:bg-slate-50/50 transition-colors">
                            <td className="py-5 pl-2 text-sm font-bold text-slate-500">{h.date}</td>
                            <td className="py-5">
                               <span className="px-3 py-1 bg-indigo-50 text-indigo-600 text-[10px] font-black rounded-lg uppercase tracking-tight">{h.type}</span>
                            </td>
                            <td className="py-5 text-center text-sm font-black text-slate-900">{h.tokens.toLocaleString()}</td>
                            <td className="py-5 text-right text-sm font-black text-slate-900 pr-2">{h.cost}</td>
                         </tr>
                       ))}
                    </tbody>
                 </table>
              </div>
              <button className="w-full mt-6 py-4 text-xs font-black text-slate-400 border border-dashed border-slate-200 rounded-2xl hover:bg-slate-50 transition-all uppercase tracking-widest">
                åŠ è½½æ›´å¤šå†å²è®°å½•
              </button>
           </div>
        </div>

        <div className="lg:col-span-4 space-y-10">
           {/* å……å€¼é¢æ¿ */}
           <div className="bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
              <div className="absolute top-0 right-0 p-8 opacity-5"><CreditCardIcon size={120} /></div>
              <h3 className="text-xl font-black mb-8 flex items-center gap-3">
                 <Plus size={20} className="text-indigo-400" /> å¿«é€Ÿå‚¨å¤‡èƒ½æº
              </h3>
              <div className="space-y-4 relative z-10">
                 {packages.map((pkg, i) => (
                    <div 
                      key={i} 
                      onClick={() => setRechargeAmount(pkg.price)}
                      className={`cursor-pointer p-6 rounded-3xl border-2 transition-all ${rechargeAmount === pkg.price ? 'bg-indigo-600 border-indigo-400 shadow-xl scale-[1.02]' : 'bg-white/5 border-white/10 hover:border-indigo-500/50 group'}`}
                    >
                       <div className="flex justify-between items-start mb-2">
                          <div className={`text-xs font-black uppercase ${rechargeAmount === pkg.price ? 'text-indigo-200' : 'text-slate-500'}`}>{pkg.name}</div>
                          {pkg.discount && <span className="px-2 py-0.5 bg-rose-500 text-white text-[9px] font-black rounded uppercase">{pkg.discount}</span>}
                       </div>
                       <div className="text-3xl font-black mb-1">{pkg.tokens} <span className="text-xs font-bold opacity-40">Tokens</span></div>
                       <div className="text-sm font-medium opacity-60">Â¥ {pkg.price}</div>
                    </div>
                 ))}
              </div>
              <button className="w-full mt-10 py-5 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-3 group">
                 <CreditCardIcon size={20} className="group-hover:rotate-12 transition-transform" /> ç«‹å³ç¡®è®¤æ”¯ä»˜
              </button>
              <div className="mt-6 flex items-center justify-center gap-6 text-[10px] font-black text-slate-500 uppercase tracking-widest">
                 <span className="flex items-center gap-1.5"><ShieldCheck size={14} className="text-emerald-500" /> å®‰å…¨ç›¾ä¿</span>
                 <span className="flex items-center gap-1.5"><Zap size={14} className="text-amber-500" /> å³æ—¶å……å…¥</span>
              </div>
           </div>

           {/* æ™ºèƒ½åˆ†æ */}
           <div className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow">
              <div className="flex items-center gap-3 mb-6">
                 <div className="w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center"><Bot size={20} className="text-indigo-600" /></div>
                 <h3 className="text-lg font-black text-slate-900 leading-tight">AI è´Ÿè½½é¢„ä¼°</h3>
              </div>
              <div className="p-5 bg-slate-50 rounded-3xl border border-slate-100 italic text-[11px] leading-relaxed text-slate-600">
                â€œç³»ç»Ÿåˆ†ææ˜¾ç¤ºæ‚¨çš„æ‹›è˜é¢‘ç‡æ­£åœ¨ä¸Šå‡ã€‚å»ºè®®åœ¨ä¸‹ä¸€æ¬¡äººæ‰æœç´¢é«˜å³°å‰ï¼Œå‡çº§ä¸ºâ€˜ç²¾è‹±çŒè˜â€™å¥—é¤ï¼Œå¯é¢å¤–è·å¾— 15% çš„æ™ºèƒ½ä½“ä¼˜å…ˆå“åº”æƒé‡ã€‚â€
              </div>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- å·¥ä½œå°é¡µé¢ ---
const WorkbenchView = () => {
  const navigate = useNavigate();
  
  // å¢å¼ºåçš„åŒ¹é…æµæ•°æ®
  const matchingData = [
    { id: 1, candidate: 'é™ˆä¼Ÿ', job: 'é«˜çº§ AI å·¥ç¨‹å¸ˆ', status: 'é¢è¯•ä¸­', matchScore: 98, lastAction: 'AI é¢è¯•å®å½•ç”Ÿæˆ', nodes: ['è§£æ', 'å¯¹æ ‡', 'åˆè¯•'], currentStep: 3 },
    { id: 2, candidate: 'æèŠ³', job: 'äº§å“è®¾è®¡ä¸»ç®¡', status: 'å¾…å®¡æ ¸', matchScore: 82, lastAction: 'ç”»åƒå¤šç»´å¯¹æ¯”å®Œæˆ', nodes: ['è§£æ', 'å¯¹æ ‡'], currentStep: 2 },
    { id: 3, candidate: 'å¼ å¼º', job: 'åç«¯æ¶æ„å¸ˆ', status: 'åˆç­›æˆåŠŸ', matchScore: 75, lastAction: 'Agent è·¯ç”±åˆ†å‘æˆåŠŸ', nodes: ['è§£æ'], currentStep: 1 },
    { id: 4, candidate: 'ç‹æ•', job: 'ç®—æ³•ç ”ç©¶å‘˜', status: 'Offer', matchScore: 94, lastAction: 'è–ªèµ„è‡ªåŠ¨å¯¹æ ‡é€šè¿‡', nodes: ['è§£æ', 'å¯¹æ ‡', 'åˆè¯•', 'å¤è¯•'], currentStep: 4 },
    { id: 5, candidate: 'èµµç£Š', job: 'å‰ç«¯å·¥ç¨‹ä¸»ç®¡', status: 'è¯„ä¼°ä¸­', matchScore: 88, lastAction: 'ä»£ç é€»è¾‘æ‰«æå®Œæˆ', nodes: ['è§£æ', 'å¯¹æ ‡'], currentStep: 2 },
    { id: 6, candidate: 'å­™å€©', job: 'æ•°æ®ç§‘å­¦å®¶', status: 'å¾…çº¦é¢', matchScore: 91, lastAction: 'å€™é€‰äººæ„å‘ç¡®è®¤', nodes: ['è§£æ', 'å¯¹æ ‡', 'åˆè¯•'], currentStep: 3 },
  ];

  const tokenStats = [
    { agent: 'ç®€å†è§£ææ™ºèƒ½ä½“', tokens: '420,500', share: '35%' },
    { agent: 'é¢è¯•è¯„ä¼°æ™ºèƒ½ä½“', tokens: '312,200', share: '26%' },
    { agent: 'å¸‚åœºåˆ†ææ™ºèƒ½ä½“', tokens: '288,400', share: '24%' },
    { agent: 'è·¯ç”±è°ƒåº¦æ™ºèƒ½ä½“', tokens: '180,900', share: '15%' },
  ];

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-700">
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-10 gap-4">
        <div>
          <h1 className="text-4xl font-black text-slate-900 mb-2">æ™ºèƒ½å·¥ä½œå°</h1>
          <p className="text-slate-500 font-medium">ç”± Devnors MAS å¤šæ™ºèƒ½ä½“ç³»ç»Ÿé©±åŠ¨çš„å…¨å±€æ‹›è˜æ¦‚è§ˆ</p>
        </div>
        <div className="flex gap-3">
          <button 
            onClick={() => navigate('/tokens')}
            className="bg-white border border-slate-200 text-slate-600 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 shadow-sm hover:bg-slate-50 transition-all active:scale-95"
          >
            <CircleDollarSign size={20} className="text-amber-500" /> èµ„é‡‘è´¦æˆ·
          </button>
          <button 
            onClick={() => navigate(`/workbench/todo/${MOCK_TODOS[0].id}`)}
            className="bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 shadow-xl shadow-indigo-100 transition-all active:scale-95"
          >
            <Bot size={20} /> è¿›å…¥ AI å¯¹è¯åŠ©æ‰‹
          </button>
        </div>
      </div>

      <div className="mb-10 bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow">
        <h2 className="text-2xl font-black text-slate-900 mb-6 flex items-center gap-3">
          <ListTodo className="text-indigo-600" /> å¾…åŠäº‹é¡¹ (To-Do List)
        </h2>
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
          {MOCK_TODOS.map((todo) => (
            <div 
              key={todo.id} 
              onClick={() => navigate(`/workbench/todo/${todo.id}`)}
              className="group cursor-pointer p-6 bg-slate-50 rounded-2xl border border-slate-100 flex items-center gap-4 hover:bg-white hover:border-indigo-200 transition-all"
            >
              <div className="w-12 h-12 bg-white rounded-xl flex items-center justify-center text-indigo-600 border border-slate-100 group-hover:bg-indigo-600 group-hover:text-white transition-all">
                <todo.icon size={20} />
              </div>
              <div className="flex-1">
                <div className="text-xs font-black text-slate-400 uppercase tracking-widest mb-1">
                  {todo.priority === 'High' ? 'æ ¸å¿ƒä»»åŠ¡' : todo.priority === 'Medium' ? 'å¸¸è§„ä»»åŠ¡' : 'å»ºè®®ä»»åŠ¡'}
                </div>
                <div className="text-sm font-bold text-slate-700 group-hover:text-indigo-600">{todo.task}</div>
              </div>
              <ArrowRight size={16} className="text-slate-300 group-hover:text-indigo-600" />
            </div>
          ))}
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
        <div className="lg:col-span-12 space-y-8">
          <div className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow overflow-hidden">
            <div className="flex justify-between items-center mb-8">
              <h2 className="text-2xl font-bold text-slate-900 flex items-center gap-3">
                <Activity className="text-indigo-600" size={24} /> AI å¯¹æ¥æ‹›è˜æ±‚èŒè¯¦æƒ… (Intelligent Flow)
              </h2>
              <div className="flex gap-2">
                 <span className="flex items-center gap-1 text-[10px] font-black text-slate-400 uppercase"><div className="w-2 h-2 rounded-full bg-indigo-600"></div> å·²å®Œæˆ</span>
                 <span className="flex items-center gap-1 text-[10px] font-black text-slate-400 uppercase"><div className="w-2 h-2 rounded-full bg-slate-200"></div> å¾…æ‰§è¡Œ</span>
              </div>
            </div>
            <div className="overflow-x-auto">
              <table className="w-full text-left min-w-[1000px]">
                <thead>
                  <tr className="border-b border-slate-50 text-[10px] uppercase font-black tracking-widest text-slate-400">
                    <th className="pb-4 pl-2">å€™é€‰äººä¸ç›®æ ‡å²—ä½</th>
                    <th className="pb-4 text-center">åŒ¹é…åˆ†</th>
                    <th className="pb-4">æ ¸å¿ƒèŠ‚ç‚¹è¿›åº¦</th>
                    <th className="pb-4">æœ€æ–° AI åŠ¨ä½œ</th>
                    <th className="pb-4 text-right pr-2">çŠ¶æ€</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-slate-50">
                  {matchingData.map(item => (
                    <tr key={item.id} className="group hover:bg-slate-50/50 transition-colors">
                      <td className="py-5 pl-2">
                        <div className="flex items-center gap-4">
                           <div className="w-10 h-10 rounded-xl bg-indigo-600 text-white flex items-center justify-center font-bold shadow-lg ring-4 ring-indigo-50">
                             {item.candidate.charAt(0)}
                           </div>
                           <div>
                             <div className="font-black text-slate-900 text-sm">{item.candidate}</div>
                             <div className="text-[10px] font-bold text-slate-400 uppercase mt-0.5 tracking-tight">{item.job}</div>
                           </div>
                        </div>
                      </td>
                      <td className="py-5">
                         <div className="flex flex-col items-center gap-1">
                           <div className={`px-3 py-1 rounded-full text-[11px] font-black shadow-sm ${item.matchScore >= 90 ? 'bg-indigo-600 text-white' : 'bg-indigo-50 text-indigo-600'}`}>
                             {item.matchScore}%
                           </div>
                           <div className="text-[8px] font-bold text-slate-400 uppercase">Confidence</div>
                         </div>
                      </td>
                      <td className="py-5">
                         <div className="flex items-center gap-2">
                            {['è§£æ', 'å¯¹æ ‡', 'åˆè¯•', 'å¤è¯•'].map((node, nIdx) => (
                              <div key={nIdx} className="flex items-center">
                                <div 
                                  className={`w-2 h-2 rounded-full transition-all duration-500 ${nIdx < item.currentStep ? 'bg-indigo-600' : 'bg-slate-200'}`}
                                  title={node}
                                ></div>
                                {nIdx < 3 && <div className={`w-4 h-0.5 ${nIdx < item.currentStep - 1 ? 'bg-indigo-600' : 'bg-slate-100'}`}></div>}
                              </div>
                            ))}
                            <span className="ml-2 text-[10px] font-bold text-slate-500">{item.nodes[item.currentStep - 1]}</span>
                         </div>
                      </td>
                      <td className="py-5">
                         <div className="flex items-center gap-2">
                            <Bot size={12} className="text-indigo-400" />
                            <span className="text-xs text-slate-600 font-medium italic">â€œ{item.lastAction}â€</span>
                         </div>
                      </td>
                      <td className="py-5 text-right pr-2">
                         <div className="flex flex-col items-end gap-1">
                            <span className={`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${
                              item.status === 'é¢è¯•ä¸­' ? 'bg-blue-50 text-blue-600' : 
                              item.status === 'Offer' ? 'bg-emerald-50 text-emerald-600' : 
                              'bg-slate-100 text-slate-500'
                            }`}>
                              {item.status}
                            </span>
                            <span className="text-[9px] font-bold text-slate-400">å®æ—¶æ›´æ–°ä¸­</span>
                         </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div className="mt-10">
        <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow">
          <div className="flex justify-between items-center mb-8">
             <h3 className="text-xl font-black text-slate-900 flex items-center gap-2"><PieChart className="text-amber-500" size={20} /> æ™ºèƒ½ä½“èµ„æº Token æ¶ˆè€—å…¨æ™¯</h3>
             <button onClick={() => navigate('/tokens')} className="text-xs font-black text-indigo-600 hover:underline">æŸ¥çœ‹æ•°å­—èµ„äº§è¯¦æƒ…</button>
          </div>
          <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
            {tokenStats.map((item, i) => (
              <div key={i} className="space-y-4 p-6 bg-slate-50 rounded-3xl border border-slate-100">
                <div className="flex justify-between items-start mb-2">
                  <span className="text-[10px] font-black uppercase tracking-widest text-slate-400">{item.agent}</span>
                  <span className="text-indigo-600 font-black text-sm">{item.share}</span>
                </div>
                <div className="text-xl font-black text-slate-900">{item.tokens}</div>
                <div className="relative h-1.5 bg-white rounded-full overflow-hidden border border-slate-100">
                    <div className={`absolute top-0 left-0 h-full rounded-full transition-all duration-1000 ${i % 2 === 0 ? 'bg-indigo-600' : 'bg-emerald-500'}`} style={{ width: item.share }}></div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

// --- å¾…åŠäº‹é¡¹è¯¦æƒ…é¡µ ---
const TodoDetailView = () => {
  const { todoId } = useParams();
  const navigate = useNavigate();
  const todo = useMemo(() => MOCK_TODOS.find(t => t.id === todoId), [todoId]);
  
  const [messages, setMessages] = useState<{ role: 'ai' | 'user', text: string }[]>([]);
  const [input, setInput] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const scrollRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (todo) {
      setMessages([
        { role: 'ai', text: `ä½ å¥½ï¼æˆ‘æ˜¯ Devnors ä»»åŠ¡æ‰§è¡ŒåŠ©æ‰‹ã€‚å…³äºâ€œ${todo.task}â€è¿™é¡¹ä»»åŠ¡ï¼Œæˆ‘å·²ç»å‡†å¤‡å¥½äº†ã€‚${todo.aiAdvice} ä½ å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿæˆ–è€…æœ‰ä»€ä¹ˆå…·ä½“çš„æ‰§è¡Œç»†èŠ‚éœ€è¦æˆ‘ååŠ©ï¼Ÿ` }
      ]);
    }
  }, [todo]);

  useEffect(() => {
    scrollRef.current?.scrollTo(0, scrollRef.current.scrollHeight);
  }, [messages, isTyping]);

  const handleSend = async () => {
    if (!input.trim() || isTyping) return;
    const userMsg = input;
    setMessages(prev => [...prev, { role: 'user', text: userMsg }]);
    setInput('');
    setIsTyping(true);
    try {
      // æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œæ™ºèƒ½ä½“çš„å¯¹è¯
      const history = messages.map(m => ({
        role: m.role === 'ai' ? 'model' : 'user',
        parts: [{ text: m.text }]
      }));
      const aiResponse = await chatWithInterviewer(history, `å½“å‰ä»»åŠ¡æ˜¯ï¼š${todo?.task}ã€‚ç”¨æˆ·è¯´ï¼š${userMsg}`);
      setMessages(prev => [...prev, { role: 'ai', text: aiResponse }]);
    } catch (err) {
      console.error(err);
    } finally {
      setIsTyping(false);
    }
  };

  if (!todo) return (
    <div className="pt-40 text-center">
       <AlertCircle className="mx-auto text-slate-300 mb-4" size={64} />
       <p className="text-slate-500 font-black">å¾…åŠä»»åŠ¡ä¸å­˜åœ¨æˆ–å·²è¢«ç§»é™¤</p>
       <button onClick={() => navigate('/workbench')} className="mt-8 bg-indigo-600 text-white px-8 py-3 rounded-2xl font-black">è¿”å›å·¥ä½œå°</button>
    </div>
  );

  return (
    <div className="pt-32 pb-20 px-6 max-w-5xl mx-auto animate-in fade-in slide-in-from-bottom-4 duration-500">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 mb-10 font-black transition-colors">
        <ChevronLeft size={20} /> è¿”å›å·¥ä½œå°
      </button>

      <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div className="lg:col-span-1 space-y-6">
          <div className="bg-white rounded-[2.5rem] p-8 border border-slate-100 shadow-xl">
             <div className="w-16 h-16 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 border border-indigo-100">
                <todo.icon size={32} />
             </div>
             <div className="flex items-center gap-3 mb-4">
                <span className={`px-2.5 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${
                  todo.priority === 'High' ? 'bg-rose-50 text-rose-600' : todo.priority === 'Medium' ? 'bg-amber-50 text-amber-600' : 'bg-indigo-50 text-indigo-600'
                }`}>
                   {todo.priority} Priority
                </span>
             </div>
             <h1 className="text-2xl font-black text-slate-900 mb-4 leading-tight">{todo.task}</h1>
             <p className="text-sm text-slate-500 leading-relaxed font-medium mb-6">{todo.description}</p>
             <div className="pt-6 border-t border-slate-50">
               <button className="w-full bg-slate-900 text-white py-4 rounded-2xl font-black text-sm hover:bg-slate-800 transition-all active:scale-[0.98]">
                 æŸ¥çœ‹å®Œæˆæƒ…å†µ
               </button>
             </div>
          </div>
          
          <div className="bg-indigo-600 rounded-[2rem] p-8 text-white shadow-lg relative overflow-hidden">
             <Sparkle className="absolute -right-6 -bottom-6 w-32 h-32 text-white/10" />
             <h4 className="text-[10px] font-black uppercase tracking-widest text-indigo-200 mb-3 flex items-center gap-1.5">
               <Bot size={14} /> AI Coach åˆå§‹å»ºè®®
             </h4>
             <p className="text-sm font-bold italic leading-relaxed text-indigo-50">â€œ{todo.aiAdvice}â€</p>
          </div>
        </div>

        <div className="lg:col-span-2">
           {/* AI ä»»åŠ¡æ‰§è¡Œå¯¹è¯çª—å£ */}
           <div className="bg-slate-900 rounded-[2.5rem] overflow-hidden border border-slate-800 flex flex-col h-[650px] shadow-2xl relative">
              <div className="bg-slate-800/80 px-8 py-5 border-b border-slate-700 flex justify-between items-center">
                <div className="flex items-center gap-3">
                  <div className="w-2.5 h-2.5 bg-emerald-500 rounded-full animate-pulse"></div>
                  <span className="text-white font-black text-sm tracking-wide uppercase">AI ä»»åŠ¡æ‰§è¡ŒåŠ©æ‰‹ (Agent Active)</span>
                </div>
                <div className="flex gap-2">
                   <button onClick={() => setMessages([messages[0]])} className="p-2 text-slate-400 hover:text-white transition-colors" title="é‡ç½®å¯¹è¯">
                      <Eraser size={18} />
                   </button>
                </div>
              </div>
              
              <div ref={scrollRef} className="flex-1 overflow-y-auto p-8 space-y-6 scrollbar-hide bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')]">
                {messages.map((m, i) => (
                  <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                    <div className={`flex gap-4 max-w-[85%] ${m.role === 'user' ? 'flex-row-reverse' : 'flex-row'}`}>
                      <div className={`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg ${m.role === 'user' ? 'bg-indigo-600' : 'bg-slate-700 border border-slate-600'}`}>
                        {m.role === 'user' ? <UserIcon size={18} className="text-white" /> : <Bot size={18} className="text-indigo-400" />}
                      </div>
                      <div className={`px-5 py-4 rounded-[1.5rem] text-sm leading-relaxed shadow-sm ${m.role === 'user' ? 'bg-indigo-600 text-white rounded-tr-none' : 'bg-slate-800/90 text-slate-200 rounded-tl-none border border-slate-700 backdrop-blur-sm'}`}>
                        {m.text}
                      </div>
                    </div>
                  </div>
                ))}
                {isTyping && (
                  <div className="flex gap-4 animate-in fade-in">
                    <div className="w-10 h-10 rounded-xl bg-slate-700 flex items-center justify-center">
                      <Loader2 className="animate-spin text-indigo-400" size={18} />
                    </div>
                    <div className="px-5 py-4 bg-slate-800/50 rounded-[1.5rem] rounded-tl-none border border-slate-700">
                      <span className="text-slate-500 font-mono text-xs italic">æ­£åœ¨åˆ†æä»»åŠ¡ä¸Šä¸‹æ–‡å¹¶æ‰§è¡Œæ™ºèƒ½ä½“æ“ä½œ...</span>
                    </div>
                  </div>
                )}
              </div>
              
              <div className="p-6 bg-slate-800/40 border-t border-slate-800 backdrop-blur-md">
                <div className="flex gap-3 bg-slate-900 rounded-2xl p-2 border border-slate-700 shadow-inner">
                  <input 
                    type="text" value={input} onChange={(e) => setInput(e.target.value)} 
                    onKeyDown={(e) => e.key === 'Enter' && handleSend()}
                    className="flex-1 bg-transparent border-none rounded-xl px-4 py-3 text-sm text-white focus:outline-none placeholder:text-slate-600" 
                    placeholder="è¾“å…¥æŒ‡ä»¤ï¼Œè®© AI åŠ©æ‰‹å¸®æ‚¨å®Œæˆä»»åŠ¡..."
                  />
                  <button 
                    onClick={handleSend} disabled={isTyping}
                    className="bg-indigo-600 text-white px-6 rounded-xl flex items-center justify-center hover:bg-indigo-500 transition-all active:scale-95 disabled:opacity-50"
                  >
                    <Send size={18}/>
                  </button>
                </div>
                <div className="mt-3 flex gap-2 overflow-x-auto pb-1 no-scrollbar">
                   {["å¸®æˆ‘åˆ†æç›®å‰çš„ç“¶é¢ˆ", "ç”Ÿæˆä¸€ä»½æ‰§è¡Œè®¡åˆ’", "æ ‡è®°æ­¤é˜¶æ®µå·²å®Œæˆ"].map((suggest, sIdx) => (
                     <button 
                       key={sIdx}
                       onClick={() => { setInput(suggest); }}
                       className="whitespace-nowrap px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-[10px] font-black text-slate-400 border border-slate-700 rounded-lg transition-colors"
                     >
                       {suggest}
                     </button>
                   ))}
                </div>
              </div>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- å…³äºæˆ‘ä»¬é¡µé¢ ---
const AboutUsView = () => (
  <div className="pt-32 pb-20 px-6 max-w-4xl mx-auto">
    <div className="text-center mb-16">
      <div className="inline-flex items-center gap-2 bg-indigo-50 text-indigo-600 px-4 py-2 rounded-full text-sm font-bold mb-6 border border-indigo-100">
        <Info size={16} /> å…³äº Devnors å¾—è‹¥
      </div>
      <h1 className="text-4xl md:text-5xl font-black text-slate-900 mb-6 tracking-tight">æˆ‘ä»¬çš„ä½¿å‘½ä¸æ„¿æ™¯</h1>
    </div>
    <div className="bg-white rounded-[2.5rem] p-10 md:p-16 border border-slate-100 shadow-2xl relative overflow-hidden group">
      <div className="absolute top-0 right-0 p-16 opacity-[0.03] pointer-events-none group-hover:scale-110 transition-transform duration-1000"><Heart size={400} className="text-indigo-600" /></div>
      <div className="relative z-10">
        <h2 className="text-3xl font-black text-indigo-600 mb-8 border-b-2 border-indigo-50 pb-4 inline-block">Devnors å¾—è‹¥ - AI åŸç”Ÿæ‹›è˜å¹³å°</h2>
        <p className="text-xl md:text-2xl text-slate-700 leading-relaxed font-medium">æˆ‘ä»¬é€šè¿‡é«˜æ•ˆçš„ <span className="text-indigo-600 font-black">AI åŒ¹é…ç³»ç»Ÿ</span>ï¼Œä¸ºä¼ä¸šç²¾å‡†æ¨èå…¨çƒç²¾è‹±ï¼ŒåŒæ—¶åŠ©åŠ›äººæ‰å®ç°èŒä¸šæ¢¦æƒ³ã€‚å¾—è‹¥ï¼Œæ‰¾åˆ°ä½ çš„æ­æ¡£ï¼Œè®©æ¯ä¸€æ¬¡èŒä¸šé€‰æ‹©éƒ½æˆä¸ºå…¨çƒåŒ–çš„æœºé‡ã€‚</p>
      </div>
    </div>
  </div>
);

// --- äººæ‰ç«¯ä¸»å·¥ä½œå° ---
const CandidateView = () => {
  const [resumeText, setResumeText] = useState('');
  const [profile, setProfile] = useState<CandidateProfile | null>(null);
  const [loading, setLoading] = useState(false);
  const [loadingStep, setLoadingStep] = useState('');
  const navigate = useNavigate();

  const handleAnalyze = async () => {
    if (!resumeText) return;
    setLoading(true);
    setLoadingStep('æ­£åœ¨å¯åŠ¨å¤šæ™ºèƒ½ä½“è§£æå¼•æ“...');
    try {
      const result = await analyzeResume(resumeText);
      setProfile(result);
    } catch (err) {
      console.error(err);
    } finally {
      setLoading(false);
      setLoadingStep('');
    }
  };

  const MOCK_WORKFLOW = [
    { id: 1, company: 'å¾—è‹¥æ™ºèƒ½ç§‘æŠ€', job: 'é«˜çº§ AI å·¥ç¨‹å¸ˆ', stage: 'é¢è¯•ä¸­', date: '5æœˆ20æ—¥', status: 'active', info: 'ç¬¬äºŒè½®æŠ€æœ¯é¢ï¼š5æœˆ22æ—¥ 14:00' },
    { id: 2, company: 'å­—èŠ‚è·³åŠ¨', job: 'å¤§æ¨¡å‹ç ”å‘', stage: 'ç®€å†ç­›é€‰', date: '5æœˆ18æ—¥', status: 'pending', info: 'æ™ºèƒ½ä½“å·²è‡ªåŠ¨å¯¹æ ‡ï¼Œç­‰å¾…HRåˆå®¡' },
    { id: 3, company: 'Nexus åˆ›æ„å®éªŒå®¤', job: 'äº§å“è®¾è®¡ä¸»ç®¡', stage: 'Offer', date: '5æœˆ15æ—¥', status: 'completed', info: 'è–ªèµ„å¯¹æ ‡å·²å®Œæˆï¼Œå¾…ç¡®è®¤æ„å‘ä¹¦' },
  ];

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto">
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6">
        <div>
          <h1 className="text-4xl font-black text-slate-900 tracking-tight leading-tight">äººæ‰æ–¹</h1>
          <p className="text-slate-500 font-medium">å½“å‰æœ‰ 15 å AI æ±‚èŒæ™ºèƒ½ä½“æ­£åœ¨ä¸ºæ‚¨å…¨å¤©å€™å·¥ä½œ</p>
        </div>
        <div className="flex gap-4">
          <button 
            onClick={() => navigate('/tokens')} 
            className="bg-white border border-slate-200 text-slate-900 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 hover:border-amber-200 transition-all shadow-sm"
          >
            <CircleDollarSign size={20} className="text-amber-500" /> èµ„é‡‘è´¦æˆ·
          </button>
          <button 
            onClick={() => navigate('/candidate/profile')} 
            className="bg-white border border-slate-200 text-slate-900 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm"
          >
            <UserCircle2 size={20} className="text-indigo-600" /> äººæ‰ä¸»é¡µ
          </button>
          <button className="bg-emerald-600 text-white px-8 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 shadow-xl shadow-emerald-200 active:scale-95 transition-all">
            <Rocket size={20}/> å¼€å§‹æ±‚èŒ
          </button>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        <div className="lg:col-span-8 space-y-10">
          {!profile && !loading && (
            <div className="bg-indigo-600 p-10 rounded-3xl text-white relative overflow-hidden shadow-2xl animate-in zoom-in duration-500">
              <Globe className="absolute -right-10 -bottom-10 w-64 h-64 text-white/10" />
              <h2 className="text-3xl font-black mb-4 tracking-tight">å¼€å¯æ‚¨çš„ AI åŸç”ŸèŒä¸šç”Ÿæ¶¯</h2>
              <p className="text-indigo-100 text-lg mb-8 font-medium">Devnors å¤šæ™ºèƒ½ä½“ç³»ç»ŸåŠ©åŠ›äººæ‰å®ç°èŒä¸šæ¢¦æƒ³ã€‚åœ¨è¿™é‡Œï¼Œæ‚¨çš„èƒ½åŠ›å³æ˜¯æ‚¨çš„æ•°å­—è´§å¸ã€‚</p>
            </div>
          )}
          
          <div className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow relative overflow-hidden group">
            <h2 className="text-2xl font-black mb-6 flex items-center gap-3 text-slate-900">
              <div className="p-2 bg-indigo-100 rounded-lg text-indigo-600"><BrainCircuit size={20} /></div>
              {profile ? 'é‡æ–°è°ƒä¼˜æ‚¨çš„èŒä¸šç”»åƒ' : 'ä¸Šä¼ èŒä¸šå±¥å† (Resume Paste)'}
            </h2>
            <textarea 
              className="w-full h-48 bg-slate-50 border border-slate-200 rounded-2xl p-6 text-slate-700 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all mb-6 text-sm font-medium leading-relaxed" 
              placeholder="è¯·ç²˜è´´æ‚¨çš„ç®€å†å†…å®¹ï¼ŒDevnors æ™ºèƒ½ä½“å°†ä¸ºæ‚¨å»ºç«‹å¤šç»´è¯­ä¹‰å¯¹æ ‡ç”»åƒ..." 
              value={resumeText} 
              onChange={(e) => setResumeText(e.target.value)}
            ></textarea>
            <button 
              onClick={handleAnalyze} disabled={loading} 
              className="w-full bg-slate-900 hover:bg-slate-800 disabled:opacity-50 text-white font-black py-5 rounded-2xl flex flex-col items-center shadow-xl active:scale-[0.99] transition-all"
            >
              <div className="flex items-center gap-2">
                {loading ? <Loader2 className="animate-spin" /> : <Sparkles size={18} />} 
                <span>{loading ? 'AI å¤šæ™ºèƒ½ä½“è§£æä¸­...' : 'ç”Ÿæˆå…¨æ–¹ä½ AI èŒä¸šç”»åƒ'}</span>
              </div>
            </button>
          </div>

          <div className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow">
            <h2 className="text-2xl font-black mb-6 flex items-center gap-3 text-slate-900">
              <div className="p-2 bg-emerald-100 rounded-lg text-emerald-600"><Briefcase size={20} /></div>
              ä¼ä¸šå²—ä½åº“æ¨è
            </h2>
            <p className="text-slate-500 text-sm font-medium mb-6">åŸºäºæ‚¨çš„èŒä¸šç”»åƒï¼ŒAI æ™ºèƒ½ä½“ä¸ºæ‚¨åŒ¹é…äº†ä»¥ä¸‹ä¼˜è´¨å²—ä½</p>
              
              <div className="space-y-4">
                {RECOMMENDED_JOBS.map((job) => (
                  <div key={job.id} onClick={() => navigate(`/candidate/job/${job.id}`)} className="group p-6 bg-slate-50 hover:bg-emerald-50/50 rounded-2xl border border-slate-100 hover:border-emerald-200 transition-all cursor-pointer">
                    <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
                      <div className="flex items-start gap-4">
                        <div className="w-14 h-14 bg-white rounded-xl flex items-center justify-center shadow-sm border border-slate-100 text-2xl font-bold">
                          {job.logo}
                        </div>
                        <div>
                          <h3 className="text-lg font-black text-slate-900 group-hover:text-emerald-700 transition-colors">{job.title}</h3>
                          <p className="text-slate-600 font-medium">{job.company} Â· {job.location}</p>
                          <div className="flex flex-wrap gap-2 mt-2">
                            <span className="px-3 py-1 bg-white rounded-lg text-xs font-bold text-slate-600 border border-slate-200">{job.salary}</span>
                            <span className="px-3 py-1 bg-emerald-100 rounded-lg text-xs font-bold text-emerald-700">{job.match}% åŒ¹é…åº¦</span>
                            {job.tags.map((tag, i) => (
                              <span key={i} className="px-3 py-1 bg-slate-100 rounded-lg text-xs font-bold text-slate-500">{tag}</span>
                            ))}
                          </div>
                        </div>
                      </div>
                      <button onClick={(e) => e.stopPropagation()} className="shrink-0 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-xl font-black text-sm flex items-center gap-2 transition-all shadow-lg shadow-emerald-100">
                        <Rocket size={16} /> AI å¯¹æ¥æŠ•é€’
                      </button>
                    </div>
                    <div className="mt-4 pt-4 border-t border-slate-100">
                      <p className="text-sm text-slate-500 font-medium flex items-center gap-2">
                        <Zap size={14} className="text-amber-500" />
                        AI æ™ºèƒ½ä½“å¯¹æ¥è¯´æ˜ï¼š{job.aiIntro}
                      </p>
                    </div>
                  </div>
                ))}
              </div>
              
              <button className="w-full mt-6 bg-slate-50 hover:bg-slate-100 text-slate-600 py-4 rounded-2xl font-black text-sm flex items-center justify-center gap-2 transition-all border border-slate-200 border-dashed">
                <ChevronDown size={18} /> æŸ¥çœ‹æ›´å¤š
              </button>
            </div>

          {profile && (
            <div className="space-y-10 animate-in fade-in slide-in-from-bottom-8 duration-1000">
              {/* ç”»åƒåŸºæœ¬ä¿¡æ¯ */}
              <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow">
                <div className="flex flex-col md:flex-row justify-between items-center mb-10 gap-6">
                   <div className="flex items-center gap-6">
                      <div className="w-20 h-20 rounded-2xl bg-indigo-600 text-white flex items-center justify-center text-3xl font-bold shadow-2xl ring-4 ring-indigo-50">{profile.name.charAt(0)}</div>
                      <div>
                        <h3 className="text-3xl font-black text-slate-900 mb-1">{profile.name}</h3>
                        <p className="text-indigo-600 font-black tracking-wide">{profile.role} Â· {profile.experienceYears}å¹´ç»éªŒ</p>
                      </div>
                   </div>
                   <div className="flex gap-4">
                     <button onClick={() => navigate('/candidate/home', { state: { profile } })} className="bg-indigo-600 text-white px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-xl shadow-indigo-100">
                       <UserCircle2 size={18} /> ä¸ªäººä¸»é¡µé¢„è§ˆ
                     </button>
                     <button onClick={() => navigate('/candidate/resume', { state: { profile } })} className="bg-white border border-slate-200 text-slate-600 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm">
                       <FileText size={18} /> è¯¦å°½æ•°å­—ç®€å†
                     </button>
                   </div>
                </div>
                
                {/* æ±‚èŒç”»åƒæ¿å— */}
                <div className="grid grid-cols-1 md:grid-cols-1 gap-10">
                  <div className="p-8 bg-slate-50 rounded-3xl border border-slate-100">
                     <h4 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                       <Eye size={14} className="text-indigo-600" /> æ±‚èŒæ„å‘ç”»åƒ (Ideal Job Persona)
                     </h4>
                     <p className="text-lg text-slate-700 leading-relaxed font-bold italic">
                        â€œ{profile.idealJobPersona || 'æ™ºèƒ½ä½“æ­£åœ¨æ ¹æ®æ‚¨çš„èƒŒæ™¯æ¨å¯¼ç†æƒ³å²—ä½ç”»åƒ...'}â€
                     </p>
                  </div>
                </div>

                <div className="mt-10 grid grid-cols-1 md:grid-cols-2 gap-10">
                   <div>
                     <h4 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">å½“å‰èŒä¸šä»·å€¼å¯¹æ ‡</h4>
                     <div className="flex items-center gap-4">
                        <div className="flex-1 p-4 bg-slate-50 rounded-2xl border border-slate-100">
                           <div className="text-[10px] font-black text-slate-400 mb-1 uppercase">é¢„æœŸå¹´è–ª</div>
                           <div className="text-lg font-black text-slate-900">{profile.salaryRange || 'Â¥450k - Â¥700k'}</div>
                        </div>
                        <div className="flex-1 p-4 bg-slate-50 rounded-2xl border border-slate-100">
                           <div className="text-[10px] font-black text-slate-400 mb-1 uppercase">å¸‚åœºçƒ­åº¦</div>
                           <div className="text-lg font-black text-emerald-600">High Demand</div>
                        </div>
                     </div>
                   </div>
                   <div>
                     <h4 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">æ ¸å¿ƒæ”¹è¿›å»ºè®®</h4>
                     <ul className="space-y-3">
                        {profile.optimizationSuggestions?.slice(0, 2).map((s, i) => (
                          <li key={i} className="text-sm text-slate-600 font-medium flex items-start gap-3">
                             <CheckCircle2 size={16} className="text-indigo-500 mt-0.5 flex-shrink-0" /> {s}
                          </li>
                        ))}
                     </ul>
                   </div>
                </div>
              </div>

              {/* æ±‚èŒå·¥ä½œæµæ¿å— */}
              <div className="bg-white rounded-[2.5rem] p-10 border border-slate-100 card-shadow overflow-hidden">
                 <h2 className="text-2xl font-black text-slate-900 mb-8 flex items-center gap-3">
                   <Timer className="text-indigo-600" /> æ±‚èŒæµç¨‹è‡ªåŠ¨åŒ– (Job Workflow)
                 </h2>
                 <div className="space-y-6">
                    {MOCK_WORKFLOW.map((item, idx) => (
                      <div key={idx} className="flex flex-col md:flex-row items-center justify-between p-6 bg-slate-50 rounded-3xl border border-slate-100 group hover:border-indigo-200 transition-all">
                        <div className="flex items-center gap-5 w-full md:w-auto">
                           <div className={`w-12 h-12 rounded-2xl flex items-center justify-center flex-shrink-0 transition-transform ${item.status === 'active' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-100' : 'bg-slate-200 text-slate-400'}`}>
                              {item.status === 'active' ? <History size={24} /> : item.status === 'completed' ? <Award size={24} /> : <ClipboardCheck size={24} />}
                           </div>
                           <div>
                              <div className="text-sm font-black text-slate-800">{item.company} Â· {item.job}</div>
                              <div className="flex items-center gap-3 mt-1">
                                 <span className="text-[10px] font-black uppercase text-indigo-500 bg-indigo-50 px-2 py-0.5 rounded-lg">{item.stage}</span>
                                 <span className="text-xs text-slate-400 font-bold">{item.date}</span>
                              </div>
                           </div>
                        </div>
                        <div className="mt-4 md:mt-0 w-full md:w-auto text-left md:text-right">
                           <p className="text-xs text-slate-500 font-bold mb-2 italic">â€œ{item.info}â€</p>
                           <button className="text-xs font-black text-indigo-600 hover:underline">æŸ¥çœ‹è¯¦æƒ…è®°å½•</button>
                        </div>
                      </div>
                    ))}
                 </div>
                 <button className="w-full mt-8 py-4 bg-slate-100/50 text-slate-400 text-xs font-black rounded-2xl border border-dashed border-slate-200 hover:bg-slate-100 transition-all uppercase tracking-widest">
                   æŸ¥çœ‹å†å²æ±‚èŒå­˜æ¡£
                 </button>
              </div>

              {/* æ¨¡æ‹Ÿé¢è¯• */}
              <div className="space-y-6">
                <h3 className="text-2xl font-black text-slate-900 px-4 flex items-center gap-3"><Bot className="text-indigo-600" /> AI å‹åŠ›é¢è¯•å®æˆ˜æ¼”ç»ƒ</h3>
                <MockInterviewConsole questions={profile.interviewQuestions || []} profile={profile} />
              </div>
            </div>
          )}
        </div>

        <div className="lg:col-span-4 space-y-10">
          <div className="bg-indigo-900 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
            <div className="absolute top-0 right-0 p-8 opacity-5"><Brain size={120} /></div>
            <div className="flex justify-between items-center mb-8 relative z-10">
              <h3 className="text-xl font-black flex items-center gap-3">
                <Database size={20} className="text-indigo-400" /> äººæ‰ç”»åƒ Memory
              </h3>
              <span className="px-2 py-0.5 bg-indigo-500/20 text-indigo-300 text-[9px] font-black rounded border border-indigo-500/30">LTM ACTIVE</span>
            </div>
            <div className="space-y-6 relative z-10">
              {CANDIDATE_MEMORIES.map(memory => (
                <div key={memory.id} className="relative pl-6 border-l-2 border-indigo-500/20 group">
                  <div className="absolute -left-1.5 top-1.5 w-2.5 h-2.5 bg-indigo-500 rounded-full group-hover:scale-125 transition-transform shadow-[0_0_12px_rgba(99,102,241,0.6)] border border-indigo-900"></div>
                  <div className="flex justify-between items-center mb-1.5">
                    <span className={`px-2 py-0.5 rounded-lg text-[9px] font-black uppercase border tracking-widest ${memory.color}`}>
                      {memory.type}
                    </span>
                    <span className="text-[9px] text-indigo-400 font-mono flex items-center gap-1"><Clock size={10} /> {memory.date}</span>
                  </div>
                  <p className="text-[11px] text-indigo-100 leading-relaxed font-bold italic line-clamp-2">"{memory.content}"</p>
                </div>
              ))}
            </div>
            <button 
              onClick={() => navigate('/candidate/memory')}
              className="w-full mt-10 py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-[11px] font-black text-indigo-400 flex items-center justify-center gap-2 transition-all active:scale-95 group"
            >
              <Pin size={14} className="group-hover:rotate-12 transition-transform" /> è¿›å…¥è®°å¿†ç®¡ç†ä¸­å¿ƒ
            </button>
          </div>
          
          {profile && (
            <div className="sticky top-28 space-y-10">
              <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow">
                <h3 className="text-xl font-black mb-8 flex items-center gap-3 text-slate-900">
                   <BarChart3 size={20} className="text-indigo-600" /> æ ¸å¿ƒç«äº‰åŠ›é›·è¾¾
                </h3>
                <RadarChart data={profile.radarData} />
              </div>

              <div className="bg-white p-10 rounded-[2.5rem] border border-slate-100 card-shadow">
                <h3 className="text-xl font-black mb-8 flex items-center gap-3">
                   <Target size={20} className="text-indigo-600" /> AI æ™ºèƒ½æœºä¼šå¯¹æ ‡
                </h3>
                <div className="space-y-6">
                   {MOCK_JOBS.slice(0, 3).map(job => (
                     <div key={job.id} className="group p-5 rounded-3xl bg-slate-50 hover:bg-white border border-transparent hover:border-indigo-100 transition-all shadow-sm hover:shadow-xl cursor-pointer">
                        <div className="flex justify-between items-start mb-3">
                           <div className="text-sm font-black text-slate-900">{job.title}</div>
                           <div className="text-[10px] font-black text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-full">{job.matchScore}% åŒ¹é…</div>
                        </div>
                        <div className="text-[11px] text-slate-500 font-bold mb-3">{job.company} Â· {job.salary}</div>
                        <div className="flex flex-wrap gap-1.5">
                           {job.tags.slice(0, 2).map((t, i) => (
                             <span key={i} className="px-2 py-0.5 bg-white text-slate-400 text-[9px] font-black rounded-lg border border-slate-100 uppercase tracking-tighter">{t}</span>
                           ))}
                        </div>
                        <button className="w-full mt-4 py-2 text-[10px] font-black text-indigo-600 border border-indigo-100 rounded-xl group-hover:bg-indigo-600 group-hover:text-white transition-all">ä¸€é”®æ™ºèƒ½æŠ•é€’</button>
                     </div>
                   ))}
                </div>
              </div>

              <div className="bg-indigo-900 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
                <div className="absolute top-0 right-0 p-8 opacity-5"><Brain size={120} /></div>
                <div className="flex justify-between items-center mb-8 relative z-10">
                  <h3 className="text-xl font-black flex items-center gap-3">
                    <Database size={20} className="text-indigo-400" /> äººæ‰ç”»åƒ Memory
                  </h3>
                  <span className="px-2 py-0.5 bg-indigo-500/20 text-indigo-300 text-[9px] font-black rounded border border-indigo-500/30">LTM ACTIVE</span>
                </div>
                <div className="space-y-6 relative z-10">
                  {CANDIDATE_MEMORIES.map(memory => (
                    <div key={memory.id} className="relative pl-6 border-l-2 border-indigo-500/20 group">
                      <div className="absolute -left-1.5 top-1.5 w-2.5 h-2.5 bg-indigo-500 rounded-full group-hover:scale-125 transition-transform shadow-[0_0_12px_rgba(99,102,241,0.6)] border border-indigo-900"></div>
                      <div className="flex justify-between items-center mb-1.5">
                        <span className={`px-2 py-0.5 rounded-lg text-[9px] font-black uppercase border tracking-widest ${memory.color}`}>
                          {memory.type}
                        </span>
                        <span className="text-[9px] text-indigo-400 font-mono flex items-center gap-1"><Clock size={10} /> {memory.date}</span>
                      </div>
                      <p className="text-[11px] text-indigo-100 leading-relaxed font-bold italic line-clamp-2">"{memory.content}"</p>
                    </div>
                  ))}
                </div>
                <button 
                  onClick={() => navigate('/candidate/memory')}
                  className="w-full mt-10 py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-[11px] font-black text-indigo-400 flex items-center justify-center gap-2 transition-all active:scale-95 group"
                >
                  <Pin size={14} className="group-hover:rotate-12 transition-transform" /> è¿›å…¥è®°å¿†ç®¡ç†ä¸­å¿ƒ
                </button>
              </div>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

// --- äººæ‰ä¸ªäººä¸»é¡µ (CandidateHomeView) ---
const CandidateHomeView = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const profile = location.state?.profile as CandidateProfile;

  if (!profile) return (
    <div className="pt-40 text-center animate-in fade-in">
       <Loader2 className="animate-spin mx-auto text-indigo-600 mb-4" size={48} />
       <p className="text-slate-500 font-black">æ­£åœ¨åŠ è½½æ‚¨çš„ä¸ªæ€§åŒ–ä¸»é¡µ...</p>
       <button onClick={() => navigate('/candidate')} className="mt-8 bg-indigo-600 text-white px-8 py-3 rounded-2xl font-black">è¿”å›æ§åˆ¶å°</button>
    </div>
  );

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-500">
      <div className="flex items-center justify-between mb-12">
        <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-black transition-colors">
          <ChevronLeft size={20} /> è¿”å›æ§åˆ¶å°
        </button>
        <button className="bg-slate-900 text-white px-6 py-3 rounded-2xl font-black flex items-center gap-2 shadow-xl active:scale-95 transition-all">
          <Share2 size={18} /> åˆ†äº«æˆ‘çš„ä¸ªäººä¸»é¡µ
        </button>
      </div>

      <div className="mb-8">
        <button onClick={() => navigate('/candidate/memory')} className="group w-full bg-gradient-to-r from-indigo-600 to-violet-600 hover:from-indigo-700 hover:to-violet-700 text-white px-8 py-6 rounded-3xl font-black text-xl flex items-center justify-center gap-3 shadow-2xl shadow-indigo-200 active:scale-98 transition-all">
          <Brain size={28} /> äººæ‰ç”»åƒ Memory
          <ChevronRight size={24} className="group-hover:translate-x-1 transition-transform" />
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        <div className="lg:col-span-8 space-y-12">
          {/* é¡¶æ ä¸ªäººä¿¡æ¯ */}
          <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow flex flex-col md:flex-row gap-10 items-center">
            <div className="w-40 h-40 bg-indigo-600 text-white flex items-center justify-center text-5xl font-black rounded-[2.5rem] shadow-2xl ring-8 ring-indigo-50">
              {profile.name.charAt(0)}
            </div>
            <div className="flex-1 text-center md:text-left">
              <h1 className="text-5xl font-black text-slate-900 tracking-tight mb-2">{profile.name}</h1>
              <p className="text-2xl text-indigo-600 font-black mb-6">{profile.role} Â· {profile.experienceYears} å¹´å®æˆ˜ç»éªŒ</p>
              <div className="flex flex-wrap gap-2 justify-center md:justify-start">
                {profile.skills.map((s, i) => (
                  <span key={i} className="px-4 py-2 bg-slate-50 text-slate-500 text-xs font-bold rounded-xl border border-slate-100">{s}</span>
                ))}
              </div>
            </div>
          </div>

          {/* èŒä¸šæ¦‚è§ˆä¸ç†æƒ³ç”»åƒ */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div className="bg-indigo-600 text-white rounded-[3rem] p-10 shadow-2xl">
              <h3 className="text-xl font-black mb-6 flex items-center gap-2"><Sparkles size={20} /> èŒä¸šç»¼è¿°</h3>
              <p className="text-lg leading-relaxed text-indigo-50 font-medium italic">â€œ{profile.summary}â€</p>
            </div>
            <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow">
              <h3 className="text-xl font-black text-indigo-600 mb-6 flex items-center gap-2"><Eye size={20} /> ç†æƒ³å·¥ä½œç”»åƒ</h3>
              <p className="text-lg leading-relaxed text-slate-700 font-bold italic">â€œ{profile.idealJobPersona}â€</p>
            </div>
          </div>

          {/* è¯¦ç»†æŠ€èƒ½ä¸æ™‹å‡è·¯å¾„ */}
          <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow">
            <h3 className="text-2xl font-black text-slate-900 mb-10 flex items-center gap-3"><TrendingUp className="text-indigo-600" /> AI å»ºè®®çš„èŒä¸šæ™‹å‡è·¯å¾„</h3>
            <div className="space-y-8 relative before:absolute before:left-[19px] before:top-4 before:bottom-4 before:w-0.5 before:bg-slate-100">
               {profile.careerPath?.map((step, i) => (
                  <div key={i} className="relative pl-12">
                     <div className="absolute left-0 top-1 w-10 h-10 rounded-full bg-white border-4 border-indigo-600 flex items-center justify-center text-indigo-600 font-black z-10">{i + 1}</div>
                     <h4 className="text-xl font-black text-slate-900 mb-2">{step.role} <span className="text-sm font-bold text-slate-400 ml-4">{step.timeframe}</span></h4>
                     <p className="text-slate-500 font-medium">{step.requirement}</p>
                  </div>
               ))}
            </div>
          </div>
        </div>

        <div className="lg:col-span-4 space-y-12">
           {/* é›·è¾¾å›¾ */}
           <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow">
              <h3 className="text-xl font-black text-slate-900 mb-8 flex items-center gap-2"><BarChart3 className="text-indigo-600" /> æ ¸å¿ƒç«äº‰åŠ›é›·è¾¾å›¾</h3>
              <RadarChart data={profile.radarData} />
           </div>

           {/* æ™ºèƒ½ä½“åé¦ˆ */}
           <div className="bg-slate-900 text-white rounded-[3rem] p-10 shadow-2xl">
              <h3 className="text-xl font-black mb-8 flex items-center gap-2"><Users className="text-indigo-400" /> å¤šæ™ºèƒ½ä½“ä¸“å®¶è¯„ä»·</h3>
              <div className="space-y-8">
                 {profile.agentFeedbacks?.map((fb, i) => (
                    <div key={i} className="space-y-2">
                       <div className="flex justify-between items-center">
                          <span className="text-xs font-black text-indigo-400 uppercase tracking-widest">{fb.agentName}</span>
                          <span className="text-lg font-black">{fb.score}</span>
                       </div>
                       <p className="text-sm text-slate-400 leading-relaxed font-medium italic">â€œ{fb.comment}â€</p>
                    </div>
                 ))}
              </div>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- ä¼ä¸šç”»åƒ Memory è¯¦æƒ…é¡µ ---
const EnterpriseMemoryView = () => {
  const navigate = useNavigate();
  const [activeCategory, setActiveCategory] = useState('å…¨éƒ¨');

  const filteredMemories = useMemo(() => {
    if (activeCategory === 'å…¨éƒ¨') return ENTERPRISE_MEMORIES;
    return ENTERPRISE_MEMORIES.filter(m => m.type === activeCategory);
  }, [activeCategory]);

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-500">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-black transition-colors">
        <ChevronLeft size={20} /> è¿”å›
      </button>

      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6">
        <div>
           <h1 className="text-4xl font-black text-slate-900 flex items-center gap-4">
             <div className="p-3 bg-indigo-600 text-white rounded-2xl shadow-xl shadow-indigo-100"><Brain size={32} /></div>
             ä¼ä¸šç”»åƒ Memory è®°å¿†ä¸­å¿ƒ
           </h1>
           <p className="text-slate-500 font-medium mt-2">Devnors Agent æŒç»­å­¦ä¹ å¹¶å›ºåŒ–çš„ä¼ä¸šæ‹›è˜åå¥½ä¸æ–‡åŒ–åŸºå› </p>
        </div>
        <button className="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black flex items-center gap-2 shadow-xl hover:bg-indigo-700 transition-all active:scale-95">
           <Plus size={20} /> æ‰‹åŠ¨å½•å…¥æ–°è®°å¿†
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        <div className="lg:col-span-3 space-y-4">
           <div className="bg-white p-6 rounded-[2rem] border border-slate-100 card-shadow">
              <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-6 px-2">è®°å¿†åˆ†ç±»åº“</h3>
              <div className="space-y-1">
                 {['å…¨éƒ¨', 'æ–‡åŒ–', 'æŠ€æœ¯', 'è¦æ±‚', 'ç­–ç•¥'].map((cat) => (
                   <button 
                     key={cat}
                     onClick={() => setActiveCategory(cat)}
                     className={`w-full text-left px-4 py-3 rounded-xl font-bold text-sm transition-all flex justify-between items-center ${activeCategory === cat ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-600 hover:bg-slate-50'}`}
                   >
                     {cat}
                     <ChevronRight size={14} className={activeCategory === cat ? 'opacity-100' : 'opacity-0'} />
                   </button>
                 ))}
              </div>
           </div>
           
           <div className="bg-slate-900 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden">
              <Sparkle className="absolute -right-4 -bottom-4 w-24 h-24 text-white/5" />
              <h4 className="text-[10px] font-black uppercase text-indigo-400 mb-2">AI è®°å¿†åŒæ­¥çŠ¶æ€</h4>
              <div className="flex items-center gap-2 mb-4">
                 <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                 <span className="text-sm font-black">Agent åŒæ­¥ä¸­ (100%)</span>
              </div>
              <p className="text-xs text-slate-400 leading-relaxed italic">â€œç³»ç»Ÿæ­£åœ¨å®æ—¶åˆ†ææ‚¨ä¸äººæ‰æ²Ÿé€šçš„ç»†èŠ‚ï¼Œå¹¶è‡ªåŠ¨æç‚¼æ–°çš„æ‹›è˜åå¥½è®°å¿†ã€‚â€</p>
           </div>
        </div>

        <div className="lg:col-span-9">
           <div className="grid grid-cols-1 gap-6">
              {filteredMemories.map((memory) => (
                <div key={memory.id} className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow group hover:border-indigo-200 transition-all flex flex-col md:flex-row gap-8">
                   <div className="flex-1">
                      <div className="flex items-center gap-3 mb-4">
                         <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider border ${memory.color}`}>
                           {memory.type}
                         </span>
                         <span className="text-xs font-bold text-slate-400">{memory.date} å›ºåŒ–</span>
                         <div className={`ml-auto w-2 h-2 rounded-full ${memory.importance === 'High' ? 'bg-rose-500' : 'bg-amber-500'}`} title={`é‡è¦æ€§: ${memory.importance}`}></div>
                      </div>
                      <p className="text-lg text-slate-800 font-bold leading-relaxed mb-6 group-hover:text-indigo-600 transition-colors">
                        â€œ{memory.content}â€
                      </p>
                      <div className="flex items-center gap-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                         <button className="flex items-center gap-1.5 hover:text-indigo-600 transition-colors"><Edit3 size={12} /> ç¼–è¾‘</button>
                         <button className="flex items-center gap-1.5 hover:text-rose-600 transition-colors"><Trash2 size={12} /> ç§»é™¤è®°å¿†</button>
                      </div>
                   </div>
                   <div className="md:w-64 bg-slate-50 rounded-3xl p-6 border border-slate-100 flex flex-col justify-center">
                      <h5 className="text-[9px] font-black text-slate-400 uppercase tracking-tighter mb-2">Agent æ¨ç†é€»è¾‘</h5>
                      <p className="text-[11px] text-slate-500 font-medium leading-relaxed italic">
                        åŸºäºæ‚¨è¿‡å» 10 æ¬¡å¯¹å€™é€‰äººçš„ç­›é€‰åå¥½è‡ªåŠ¨æ€»ç»“ï¼Œå»ºè®®åœ¨åç»­å²—ä½åŒ¹é…ä¸­å¢åŠ è¯¥ç»´åº¦çš„æƒé‡ã€‚
                      </p>
                   </div>
                </div>
              ))}
           </div>
        </div>
      </div>
    </div>
  );
};

// --- äººæ‰ç”»åƒ Memory è¯¦æƒ…é¡µ ---
const CandidateMemoryView = () => {
  const navigate = useNavigate();
  const [activeCategory, setActiveCategory] = useState('å…¨éƒ¨');

  const filteredMemories = useMemo(() => {
    if (activeCategory === 'å…¨éƒ¨') return CANDIDATE_MEMORIES;
    return CANDIDATE_MEMORIES.filter(m => m.type === activeCategory);
  }, [activeCategory]);

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-500">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-black transition-colors">
        <ChevronLeft size={20} /> è¿”å›
      </button>

      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6">
        <div>
           <h1 className="text-4xl font-black text-slate-900 flex items-center gap-4">
             <div className="p-3 bg-indigo-600 text-white rounded-2xl shadow-xl shadow-indigo-100"><Brain size={32} /></div>
             äººæ‰ç”»åƒ Memory è®°å¿†ä¸­å¿ƒ
           </h1>
           <p className="text-slate-500 font-medium mt-2">Devnors Agent æŒç»­å­¦ä¹ å¹¶å›ºåŒ–çš„äººæ‰èƒ½åŠ›ã€æŠ€èƒ½åå¥½ä¸èŒä¸šå‘å±•è½¨è¿¹</p>
        </div>
        <button className="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black flex items-center gap-2 shadow-xl hover:bg-indigo-700 transition-all active:scale-95">
           <Plus size={20} /> æ‰‹åŠ¨å½•å…¥æ–°è®°å¿†
        </button>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        <div className="lg:col-span-3 space-y-4">
           <div className="bg-white p-6 rounded-[2rem] border border-slate-100 card-shadow">
              <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-6 px-2">è®°å¿†åˆ†ç±»åº“</h3>
              <div className="space-y-1">
                 {['å…¨éƒ¨', 'æŠ€èƒ½', 'ç»éªŒ', 'åå¥½', 'ç›®æ ‡'].map((cat) => (
                   <button 
                     key={cat}
                     onClick={() => setActiveCategory(cat)}
                     className={`w-full text-left px-4 py-3 rounded-xl font-bold text-sm transition-all flex justify-between items-center ${activeCategory === cat ? 'bg-indigo-600 text-white shadow-lg' : 'text-slate-600 hover:bg-slate-50'}`}
                   >
                     {cat}
                     <ChevronRight size={14} className={activeCategory === cat ? 'opacity-100' : 'opacity-0'} />
                   </button>
                 ))}
              </div>
           </div>
           
           <div className="bg-indigo-600 p-8 rounded-[2rem] text-white shadow-xl relative overflow-hidden">
              <Sparkle className="absolute -right-4 -bottom-4 w-24 h-24 text-white/5" />
              <h4 className="text-[10px] font-black uppercase text-white/80 mb-2">AI è®°å¿†åŒæ­¥çŠ¶æ€</h4>
              <div className="flex items-center gap-2 mb-4">
                 <div className="w-2 h-2 bg-white rounded-full animate-pulse"></div>
                 <span className="text-sm font-black">Agent åŒæ­¥ä¸­ (100%)</span>
              </div>
              <p className="text-xs text-white/80 leading-relaxed italic">"ç³»ç»Ÿæ­£åœ¨å®æ—¶åˆ†ææ‚¨çš„èŒä¸šå±¥å†ï¼Œå¹¶è‡ªåŠ¨æç‚¼èƒ½åŠ›ç”»åƒä¸èŒä¸šåå¥½è®°å¿†ã€‚"</p>
           </div>
        </div>

        <div className="lg:col-span-9">
           <div className="grid grid-cols-1 gap-6">
              {filteredMemories.map((memory) => (
                <div key={memory.id} className="bg-white p-8 rounded-[2.5rem] border border-slate-100 card-shadow group hover:border-indigo-200 transition-all flex flex-col md:flex-row gap-8">
                   <div className="flex-1">
                      <div className="flex items-center gap-3 mb-4">
                         <span className={`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider border ${memory.color}`}>
                           {memory.type}
                         </span>
                         <span className="text-xs font-bold text-slate-400">{memory.date} å›ºåŒ–</span>
                         <div className={`ml-auto w-2 h-2 rounded-full ${memory.importance === 'High' ? 'bg-rose-500' : 'bg-indigo-500'}`} title={`é‡è¦æ€§: ${memory.importance}`}></div>
                      </div>
                      <p className="text-lg text-slate-800 font-bold leading-relaxed mb-6 group-hover:text-indigo-600 transition-colors">
                        "{memory.content}"
                      </p>
                      <div className="flex items-center gap-4 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                         <button className="flex items-center gap-1.5 hover:text-indigo-600 transition-colors"><Edit3 size={12} /> ç¼–è¾‘</button>
                         <button className="flex items-center gap-1.5 hover:text-rose-600 transition-colors"><Trash2 size={12} /> ç§»é™¤è®°å¿†</button>
                      </div>
                   </div>
                   <div className="md:w-64 bg-indigo-50 rounded-3xl p-6 border border-indigo-100 flex flex-col justify-center">
                      <h5 className="text-[9px] font-black text-indigo-600 uppercase tracking-tighter mb-2">Agent æ¨ç†é€»è¾‘</h5>
                      <p className="text-[11px] text-slate-500 font-medium leading-relaxed italic">
                        åŸºäºæ‚¨çš„èŒä¸šå±¥å†å’Œé¢è¯•åé¦ˆè‡ªåŠ¨æ€»ç»“ï¼Œä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„èŒä¸šå‘å±•æ–¹å‘ã€‚
                      </p>
                   </div>
                </div>
              ))}
           </div>
        </div>
      </div>
    </div>
  );
};

// --- å²—ä½è¯¦æƒ…é¡µ ---
const JobDetailView = () => {
  const { jobId } = useParams();
  const navigate = useNavigate();
  
  const job = RECOMMENDED_JOBS.find(j => j.id === Number(jobId)) || RECOMMENDED_JOBS[0];
  
  return (
    <div className="pt-32 pb-20 px-6 max-w-5xl mx-auto animate-in fade-in duration-500">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-emerald-600 font-black transition-colors mb-8">
        <ChevronLeft size={20} /> è¿”å›
      </button>
      
      <div className="bg-white rounded-[2.5rem] border border-slate-100 card-shadow overflow-hidden">
        <div className="bg-gradient-to-r from-emerald-600 to-teal-600 p-10 text-white">
          <div className="flex items-start gap-6">
            <div className="w-20 h-20 bg-white rounded-2xl flex items-center justify-center text-4xl shadow-lg">
              {job.logo}
            </div>
            <div className="flex-1">
              <h1 className="text-3xl font-black mb-2">{job.title}</h1>
              <p className="text-emerald-100 text-xl font-medium mb-4">{job.company} Â· {job.location}</p>
              <div className="flex flex-wrap gap-3">
                <span className="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl font-bold">{job.salary}</span>
                <span className="px-4 py-2 bg-white/20 backdrop-blur-sm rounded-xl font-bold">{job.match}% åŒ¹é…åº¦</span>
              </div>
            </div>
            <button className="bg-white text-emerald-600 px-8 py-4 rounded-2xl font-black flex items-center gap-2 shadow-xl hover:scale-105 transition-all">
              <Rocket size={20} /> AI ä¸€é”®æŠ•é€’
            </button>
          </div>
        </div>
        
        <div className="p-10">
          <div className="mb-10">
            <h3 className="text-xl font-black text-slate-900 mb-4 flex items-center gap-2">
              <Briefcase size={20} className="text-emerald-600" /> èŒä½æè¿°
            </h3>
            <div className="bg-slate-50 rounded-2xl p-6 border border-slate-100">
              <p className="text-slate-700 leading-relaxed font-medium">
                æˆ‘ä»¬æ­£åœ¨å¯»æ‰¾ä¸€ä½èµ„æ·± {job.title} åŠ å…¥æˆ‘ä»¬çš„å›¢é˜Ÿã€‚ä½œä¸º {job.company} çš„æ ¸å¿ƒæˆå‘˜ï¼Œæ‚¨å°†å‚ä¸é‡è¦é¡¹ç›®çš„è®¾è®¡ä¸å¼€å‘ï¼Œæ¨åŠ¨æŠ€æœ¯åˆ›æ–°ã€‚
              </p>
            </div>
          </div>
          
          <div className="mb-10">
            <h3 className="text-xl font-black text-slate-900 mb-4 flex items-center gap-2">
              <Zap size={20} className="text-amber-500" /> AI æ™ºèƒ½ä½“å¯¹æ¥è¯´æ˜
            </h3>
            <div className="bg-amber-50 rounded-2xl p-6 border border-amber-100">
              <p className="text-slate-700 leading-relaxed font-medium">{job.aiIntro}</p>
            </div>
          </div>
          
          <div className="mb-10">
            <h3 className="text-xl font-black text-slate-900 mb-4 flex items-center gap-2">
              <Tag size={20} className="text-indigo-600" /> æŠ€èƒ½è¦æ±‚
            </h3>
            <div className="flex flex-wrap gap-3">
              {job.tags.map((tag, i) => (
                <span key={i} className="px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl font-bold">{tag}</span>
              ))}
            </div>
          </div>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="bg-slate-50 rounded-2xl p-6 border border-slate-100">
              <h4 className="font-black text-slate-900 mb-2 flex items-center gap-2">
                <Clock size={18} className="text-emerald-600" /> å‘å¸ƒæ—¶é—´
              </h4>
              <p className="text-slate-600 font-medium">2024-01-15</p>
            </div>
            <div className="bg-slate-50 rounded-2xl p-6 border border-slate-100">
              <h4 className="font-black text-slate-900 mb-2 flex items-center gap-2">
                <MapPin size={18} className="text-emerald-600" /> å·¥ä½œåœ°ç‚¹
              </h4>
              <p className="text-slate-600 font-medium">{job.location}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

// --- äººæ‰ä¸»é¡µè¯¦æƒ…é¡µ ---
const CandidateProfileView = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const profile = location.state?.profile as CandidateProfile;

  const mockProfile: CandidateProfile = profile || {
    name: 'å¼ æ˜',
    role: 'é«˜çº§å‰ç«¯æ¶æ„å¸ˆ',
    experienceYears: 8,
    skills: ['React', 'TypeScript', 'Node.js', 'GraphQL', 'Rust', 'AI/ML'],
    radarData: [
      { subject: 'å‰ç«¯æ¶æ„', value: 95 },
      { subject: 'åç«¯å¼€å‘', value: 75 },
      { subject: 'AI/ML', value: 70 },
      { subject: 'ç³»ç»Ÿè®¾è®¡', value: 90 },
      { subject: 'å›¢é˜Ÿåä½œ', value: 88 },
      { subject: 'ä»£ç è´¨é‡', value: 92 },
    ],
    summary: '8å¹´äº’è”ç½‘ä»ä¸šç»éªŒï¼Œä¸“æ³¨äºå¤§è§„æ¨¡å‰ç«¯ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–ã€‚æ›¾åœ¨å¤´éƒ¨ç§‘æŠ€å…¬å¸ä¸»å¯¼å¤šä¸ªäº¿çº§ç”¨æˆ·äº§å“çš„æ ¸å¿ƒå‰ç«¯æ¶æ„å‡çº§ï¼Œå…·å¤‡ä¸°å¯Œçš„å¾®å‰ç«¯æ¶æ„è®¾è®¡å’Œå›¢é˜ŸæŠ€æœ¯ç®¡ç†ç»éªŒã€‚',
    idealJobPersona: 'å¯»æ±‚æŠ€æœ¯é©±åŠ¨å‹å›¢é˜Ÿï¼Œè‡´åŠ›äºç”¨æŠ€æœ¯åˆ›é€ å•†ä¸šä»·å€¼çš„èµ„æ·±å‰ç«¯æ¶æ„å¸ˆèŒä½ã€‚æœŸæœ›å‚ä¸å‰æ²¿æŠ€æœ¯ï¼ˆAIã€è¾¹ç¼˜è®¡ç®—ï¼‰çš„äº§å“ç ”å‘ã€‚',
    careerPath: [
      { role: 'é«˜çº§å‰ç«¯æ¶æ„å¸ˆ', timeframe: '2022-è‡³ä»Š', requirement: 'ä¸»å¯¼å…¬å¸å‰ç«¯æ¶æ„å‡çº§ï¼Œæ¨è¿›å¾®å‰ç«¯è½åœ°' },
      { role: 'å‰ç«¯æŠ€æœ¯ä¸“å®¶', timeframe: '2020-2022', requirement: 'è´Ÿè´£äº¿çº§ç”¨æˆ·äº§å“çš„æ€§èƒ½ä¼˜åŒ–å’ŒæŠ€æœ¯æ¶æ„' },
      { role: 'èµ„æ·±å‰ç«¯å·¥ç¨‹å¸ˆ', timeframe: '2018-2020', requirement: 'ä¸»å¯¼å¤šä¸ªå…³é”®é¡¹ç›®çš„å‰ç«¯å¼€å‘å’Œæ¶æ„è®¾è®¡' },
    ],
    agentFeedbacks: [
      { agentName: 'æ¶æ„è¯„å®¡ Agent', type: 'Technical', comment: 'ç³»ç»Ÿè®¾è®¡èƒ½åŠ›ä¼˜ç§€ï¼Œä»£ç æ¶æ„æ¸…æ™°æ˜“æ‡‚', score: 95 },
      { agentName: 'é¢è¯•å®˜ Agent', type: 'SoftSkills', comment: 'æ²Ÿé€šè¡¨è¾¾æ¸…æ™°ï¼ŒæŠ€æœ¯åˆ†äº«èƒ½åŠ›çªå‡º', score: 90 },
      { agentName: 'HR Agent', type: 'Strategy', comment: 'èŒä¸šè§„åˆ’æ¸…æ™°ï¼Œç¨³å®šæ€§å’Œæˆé•¿æ€§å…¼å¤‡', score: 88 },
    ]
  };

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-500">
      <div className="flex items-center justify-between mb-12">
        <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-black transition-colors">
          <ChevronLeft size={20} /> è¿”å›
        </button>
        <div className="flex gap-4">
          <button className="bg-white border border-slate-200 text-slate-600 px-6 py-3 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 transition-all">
            <Download size={18} /> ä¸‹è½½ PDF
          </button>
          <button className="bg-indigo-600 text-white px-6 py-3 rounded-2xl font-black text-sm flex items-center gap-2 shadow-xl hover:bg-indigo-700 transition-all">
            <Share2 size={18} /> åˆ†äº«ä¸»é¡µ
          </button>
        </div>
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        {/* å·¦ä¾§è¾¹æ  */}
        <div className="lg:col-span-4 space-y-8">
          {/* å¤´åƒå¡ç‰‡ */}
          <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow text-center">
            <div className="w-40 h-40 bg-indigo-600 text-white flex items-center justify-center text-5xl font-black rounded-[2.5rem] shadow-2xl ring-8 ring-indigo-50 mx-auto mb-8">
              {mockProfile.name.charAt(0)}
            </div>
            <h1 className="text-4xl font-black text-slate-900 tracking-tight mb-2">{mockProfile.name}</h1>
            <p className="text-xl text-indigo-600 font-black mb-6">{mockProfile.role}</p>
            <div className="flex flex-wrap gap-2 justify-center mb-8">
              {mockProfile.skills.map((skill, i) => (
                <span key={i} className="px-4 py-2 bg-indigo-50 text-indigo-600 text-xs font-bold rounded-xl">{skill}</span>
              ))}
            </div>
            <div className="grid grid-cols-2 gap-4 text-center">
              <div className="p-4 bg-slate-50 rounded-2xl">
                <div className="text-2xl font-black text-slate-900">{mockProfile.experienceYears}+</div>
                <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">å·¥ä½œç»éªŒ</div>
              </div>
              <div className="p-4 bg-slate-50 rounded-2xl">
                <div className="text-2xl font-black text-slate-900">98%</div>
                <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">é¢è¯•é€šè¿‡ç‡</div>
              </div>
            </div>
          </div>

          {/* è”ç³»æ–¹å¼ */}
          <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow">
            <h3 className="text-xl font-black text-slate-900 mb-8 flex items-center gap-3">
              <Mail className="text-indigo-600" size={20} /> è”ç³»æ–¹å¼
            </h3>
            <div className="space-y-6">
              <div className="flex items-center gap-4">
                <div className="w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center">
                  <Mail size={20} className="text-indigo-600" />
                </div>
                <div>
                  <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">é‚®ç®±</div>
                  <div className="text-slate-900 font-medium">zhangming@email.com</div>
                </div>
              </div>
              <div className="flex items-center gap-4">
                <div className="w-12 h-12 bg-emerald-50 rounded-2xl flex items-center justify-center">
                  <Smartphone size={20} className="text-emerald-600" />
                </div>
                <div>
                  <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">æ‰‹æœº</div>
                  <div className="text-slate-900 font-medium">138-xxxx-xxxx</div>
                </div>
              </div>
              <div className="flex items-center gap-4">
                <div className="w-12 h-12 bg-amber-50 rounded-2xl flex items-center justify-center">
                  <Globe size={20} className="text-amber-600" />
                </div>
                <div>
                  <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">ä¸ªäººç½‘ç«™</div>
                  <div className="text-slate-900 font-medium">zhangming.dev</div>
                </div>
              </div>
              <div className="flex items-center gap-4">
                <div className="w-12 h-12 bg-slate-900 rounded-2xl flex items-center justify-center">
                  <Github size={20} className="text-white" />
                </div>
                <div>
                  <div className="text-xs font-bold text-slate-400 uppercase tracking-widest">GitHub</div>
                  <div className="text-slate-900 font-medium">github.com/zhangming</div>
                </div>
              </div>
            </div>
          </div>

          {/* é›·è¾¾å›¾ */}
          <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow">
            <h3 className="text-xl font-black text-slate-900 mb-8 flex items-center gap-3">
              <BarChart3 className="text-indigo-600" size={20} /> èƒ½åŠ›é›·è¾¾
            </h3>
            <RadarChart data={mockProfile.radarData} />
          </div>
        </div>

        {/* å³ä¾§ä¸»è¦å†…å®¹ */}
        <div className="lg:col-span-8 space-y-10">
          {/* èŒä¸šæ¦‚è¿° */}
          <div className="bg-indigo-600 rounded-[3rem] p-12 shadow-2xl">
            <h3 className="text-2xl font-black text-white mb-6 flex items-center gap-3">
              <Sparkles size={24} /> å…³äºæˆ‘
            </h3>
            <p className="text-xl leading-relaxed text-indigo-50 font-medium italic">"{mockProfile.summary}"</p>
          </div>

          {/* å·¥ä½œç»å† */}
          <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow">
            <h3 className="text-2xl font-black text-slate-900 mb-10 flex items-center gap-3">
              <Briefcase size={24} className="text-indigo-600" /> å·¥ä½œç»å†
            </h3>
            <div className="space-y-8 relative before:absolute before:left-[19px] before:top-4 before:bottom-4 before:w-0.5 before:bg-slate-100">
              {mockProfile.careerPath?.map((step, i) => (
                <div key={i} className="relative pl-12">
                  <div className="absolute left-0 top-1 w-10 h-10 rounded-full bg-white border-4 border-indigo-600 flex items-center justify-center text-indigo-600 font-black z-10">{i + 1}</div>
                  <h4 className="text-xl font-black text-slate-900 mb-2">{step.role}</h4>
                  <p className="text-sm font-bold text-indigo-600 mb-2">{step.timeframe}</p>
                  <p className="text-slate-500 font-medium">{step.requirement}</p>
                </div>
              ))}
            </div>
          </div>

          {/* é¡¹ç›®ç»éªŒ */}
          <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow">
            <h3 className="text-2xl font-black text-slate-900 mb-10 flex items-center gap-3">
              <Rocket size={24} className="text-amber-600" /> é¡¹ç›®ç»éªŒ
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div className="p-8 bg-gradient-to-br from-indigo-50 to-white rounded-3xl border border-indigo-100">
                <div className="w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                  <Globe size={28} className="text-white" />
                </div>
                <h4 className="text-xl font-black text-slate-900 mb-3">äº¿çº§ç”¨æˆ·ç”µå•†å¹³å°</h4>
                <p className="text-sm text-slate-500 font-medium mb-4">ä¸»å¯¼å‰ç«¯æ¶æ„å‡çº§ï¼Œæ€§èƒ½æå‡ 40%</p>
                <div className="flex flex-wrap gap-2">
                  <span className="px-3 py-1 bg-indigo-100 text-indigo-600 text-xs font-bold rounded-lg">React</span>
                  <span className="px-3 py-1 bg-indigo-100 text-indigo-600 text-xs font-bold rounded-lg">GraphQL</span>
                  <span className="px-3 py-1 bg-indigo-100 text-indigo-600 text-xs font-bold rounded-lg">å¾®å‰ç«¯</span>
                </div>
              </div>
              <div className="p-8 bg-gradient-to-br from-amber-50 to-white rounded-3xl border border-amber-100">
                <div className="w-14 h-14 bg-amber-500 rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                  <Bot size={28} className="text-white" />
                </div>
                <h4 className="text-xl font-black text-slate-900 mb-3">AI æ™ºèƒ½é¢è¯•ç³»ç»Ÿ</h4>
                <p className="text-sm text-slate-500 font-medium mb-4">åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½é¢è¯•åŠ©æ‰‹</p>
                <div className="flex flex-wrap gap-2">
                  <span className="px-3 py-1 bg-amber-100 text-amber-600 text-xs font-bold rounded-lg">TypeScript</span>
                  <span className="px-3 py-1 bg-amber-100 text-amber-600 text-xs font-bold rounded-lg">Rust</span>
                  <span className="px-3 py-1 bg-amber-100 text-amber-600 text-xs font-bold rounded-lg">AI/ML</span>
                </div>
              </div>
            </div>
          </div>

          {/* æ™ºèƒ½ä½“è¯„ä»· */}
          <div className="bg-slate-900 rounded-[3rem] p-12 shadow-2xl">
            <h3 className="text-2xl font-black text-white mb-10 flex items-center gap-3">
              <Users size={24} className="text-indigo-400" /> AI æ™ºèƒ½ä½“è¯„ä»·
            </h3>
            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
              {mockProfile.agentFeedbacks?.map((fb, i) => (
                <div key={i} className="p-6 bg-slate-800 rounded-2xl">
                  <div className="flex justify-between items-center mb-4">
                    <span className="text-xs font-black text-indigo-400 uppercase tracking-widest">{fb.agentName}</span>
                    <span className="text-2xl font-black text-emerald-400">{fb.score}</span>
                  </div>
                  <p className="text-sm text-slate-400 leading-relaxed font-medium italic">"{fb.comment}"</p>
                </div>
              ))}
            </div>
          </div>

          {/* æ•™è‚²èƒŒæ™¯ */}
          <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow">
            <h3 className="text-2xl font-black text-slate-900 mb-10 flex items-center gap-3">
              <GraduationCap size={24} className="text-emerald-600" /> æ•™è‚²èƒŒæ™¯
            </h3>
            <div className="p-8 bg-gradient-to-r from-emerald-50 to-white rounded-3xl border border-emerald-100">
              <div className="flex items-center gap-6">
                <div className="w-16 h-16 bg-emerald-500 rounded-2xl flex items-center justify-center shadow-lg">
                  <GraduationCap size={32} className="text-white" />
                </div>
                <div>
                  <h4 className="text-xl font-black text-slate-900 mb-1">æ¸…åå¤§å­¦</h4>
                  <p className="text-indigo-600 font-bold mb-1">è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯ ç¡•å£«</p>
                  <p className="text-sm text-slate-400 font-medium">2014-2017</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

// --- ä¼ä¸šå·¥ä½œå° ---
const EmployerDashboard = () => {
  const navigate = useNavigate();
  const collabItems = [
    { title: 'é«˜çº§ AI å·¥ç¨‹å¸ˆ Â· JD æ¶¦è‰²', type: 'Position', members: ['Z', 'L'], status: 'Drafting with MAS', icon: FileText, color: 'text-indigo-600', bg: 'bg-indigo-50' },
    { title: 'ä¼ä¸šé›‡ä¸»è§†é¢‘ Â· å†…å®¹ç­–åˆ’', type: 'Content', members: ['A', 'W', 'K'], status: 'AI Scripting', icon: PenTool, color: 'text-emerald-600', bg: 'bg-emerald-50' },
    { title: 'æ‹›è˜ç”»åƒè°ƒä¼˜ Â· ç­–ç•¥ååŒ', type: 'Strategy', members: ['C'], status: 'Ready for Review', icon: Target, color: 'text-amber-600', bg: 'bg-amber-50' },
  ];

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-700">
      <div className="flex flex-col md:flex-row justify-between items-start md:items-center mb-12 gap-6">
        <div>
          <h1 className="text-4xl font-black text-slate-900 tracking-tight leading-tight">ä¼ä¸šæ–¹</h1>
          <p className="text-slate-500 font-medium">å½“å‰æœ‰ 12 å AI çŒå¤´æ™ºèƒ½ä½“æ­£åœ¨ä¸ºæ‚¨å…¨å¤©å€™å·¥ä½œ</p>
        </div>
        <div className="flex gap-4">
          <button 
            onClick={() => navigate('/tokens')} 
            className="bg-white border border-slate-200 text-slate-900 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 hover:border-amber-200 transition-all shadow-sm"
          >
            <CircleDollarSign size={20} className="text-amber-500" /> èµ„é‡‘è´¦æˆ·
          </button>
          <button 
            onClick={() => navigate('/employer/home')} 
            className="bg-white border border-slate-200 text-slate-900 px-6 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm"
          >
            <Building2 size={20} className="text-indigo-600" /> ä¼ä¸šä¸»é¡µ
          </button>
          <button className="bg-indigo-600 text-white px-8 py-3.5 rounded-2xl font-black text-sm flex items-center gap-2 shadow-xl shadow-indigo-200 active:scale-95 transition-all">
            <Plus size={20}/> å¼€å§‹æ‹›è˜
          </button>
        </div>
      </div>

      <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
        {[
          { label: 'å¹³å‡æ‹›è˜å‘¨æœŸ', value: '42.5 å°æ—¶', icon: Clock, color: 'text-indigo-600' },
          { label: 'åŒ¹é…æˆåŠŸç‡', value: '91.2%', icon: TrendingUp, color: 'text-emerald-600' },
          { label: 'æ€» Token æ¶ˆè€—', value: '1.2M', icon: Cpu, color: 'text-amber-500' }
        ].map((card, i) => (
          <div key={i} className="bg-white p-8 rounded-3xl flex items-center gap-6 border border-slate-100 card-shadow transition-transform hover:-translate-y-1">
            <div className="w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center shadow-inner"><card.icon className={card.color} size={32}/></div>
            <div>
              <div className="text-slate-400 text-xs font-black uppercase tracking-widest">{card.label}</div>
              <div className="text-3xl font-black text-slate-900">{card.value}</div>
            </div>
          </div>
        ))}
      </div>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-10">
        <div className="lg:col-span-8 space-y-10">
          
          {/* ä¿®æ”¹ï¼šäººæ‰åº“åŠŸèƒ½åˆ—è¡¨ */}
          <div className="bg-white rounded-[2.5rem] p-10 border border-slate-100 card-shadow overflow-hidden">
             <h2 className="text-2xl font-black text-slate-900 mb-8 flex items-center gap-3">
               <Users2 className="text-indigo-600" /> äººæ‰åº“åŠŸèƒ½ (Talent Pool)
             </h2>
             <div className="space-y-4">
                {MOCK_TALENTS.map((talent, idx) => (
                  <div key={idx} className="flex flex-col md:flex-row items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 group hover:border-indigo-300 transition-all">
                    <div className="flex items-center gap-5 w-full md:w-auto">
                       <div className="w-14 h-14 bg-indigo-600 text-white flex items-center justify-center text-xl font-black rounded-2xl shadow-lg ring-4 ring-indigo-50 group-hover:scale-105 transition-transform">
                          {talent.name.charAt(0)}
                       </div>
                       <div>
                          <div className="text-base font-black text-slate-900 tracking-tight">{talent.name}</div>
                          <div className="text-xs font-bold text-slate-500 mt-0.5">{MOCK_JOBS.find(j => j.id === talent.targetJobId)?.title}</div>
                          <div className="flex items-center gap-2 mt-2">
                             <span className="text-[10px] font-black uppercase text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded-lg flex items-center gap-1">
                               <Zap size={10} /> {talent.matchScore}% åŒ¹é…
                             </span>
                             <span className="text-[10px] font-black uppercase text-slate-400 flex items-center gap-1">
                               <Database size={10} /> {talent.tokensConsumed || 0} Tokens
                             </span>
                          </div>
                       </div>
                    </div>
                    <div className="flex items-center gap-6 mt-4 md:mt-0 w-full md:w-auto justify-between md:justify-end">
                       <div className="text-right">
                          <div className="flex items-center gap-2 justify-end">
                             <div className="w-2 h-2 bg-emerald-500 rounded-full animate-pulse"></div>
                             <span className="text-xs font-black text-slate-700">{talent.status}</span>
                          </div>
                          <div className="text-[10px] text-slate-400 font-bold mt-1 uppercase tracking-widest">è¯„ä¼°å®æ—¶è¿›è¡Œä¸­</div>
                       </div>
                       <button 
                         onClick={() => navigate(`/employer/talent/${talent.id}`)}
                         className="p-3 bg-white text-indigo-600 rounded-xl border border-indigo-100 hover:bg-indigo-600 hover:text-white transition-all shadow-sm active:scale-95"
                       >
                         <ChevronRight size={18} />
                       </button>
                    </div>
                  </div>
                ))}
             </div>
          </div>

          <div className="bg-white rounded-[2.5rem] p-10 border border-slate-100 card-shadow relative overflow-hidden">
             <h2 className="text-2xl font-black text-slate-900 mb-8 flex items-center gap-3">
               <Layers className="text-indigo-600" /> èŒä½ä¸å†…å®¹ååŒ (Collaboration Hub)
             </h2>
             <div className="grid grid-cols-1 gap-4">
                {collabItems.map((item, idx) => (
                  <div key={idx} className="flex flex-col md:flex-row items-center justify-between p-6 bg-slate-50 rounded-[1.5rem] border border-slate-100 hover:border-indigo-200 transition-all group">
                    <div className="flex items-center gap-5 w-full md:w-auto">
                       <div className={`w-12 h-12 ${item.bg} ${item.color} rounded-xl flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform`}>
                          <item.icon size={24} />
                       </div>
                       <div>
                          <div className="text-sm font-black text-slate-800 tracking-tight">{item.title}</div>
                          <div className="flex items-center gap-2 mt-1">
                             <span className="text-[10px] font-black uppercase text-indigo-500/80 bg-indigo-50 px-1.5 py-0.5 rounded">{item.type}</span>
                             <span className="text-xs font-medium text-slate-400 italic">{item.status}</span>
                          </div>
                       </div>
                    </div>
                    <div className="flex items-center gap-6 mt-4 md:mt-0 w-full md:w-auto justify-between md:justify-end">
                       <div className="flex -space-x-2">
                          {item.members.map((m, mIdx) => (
                            <div key={mIdx} className="w-8 h-8 rounded-full bg-indigo-600 border-2 border-white flex items-center justify-center text-[10px] font-black text-white shadow-sm">{m}</div>
                          ))}
                          <div className="w-8 h-8 rounded-full bg-slate-200 border-2 border-white flex items-center justify-center text-[10px] font-black text-slate-400">+</div>
                       </div>
                       <button className="p-2 text-slate-400 hover:text-indigo-600 transition-colors"><MessageSquare size={18} /></button>
                    </div>
                  </div>
                ))}
             </div>
          </div>
        </div>

        <div className="lg:col-span-4 space-y-10">
           {/* ä¼ä¸šç”»åƒ Memory æ¿å— */}
           <div className="bg-slate-900 rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
              <div className="absolute top-0 right-0 p-8 opacity-5"><Brain size={120} /></div>
              <div className="flex justify-between items-center mb-8 relative z-10">
                 <h3 className="text-xl font-black flex items-center gap-3">
                   <Database size={20} className="text-indigo-400" /> ä¼ä¸šç”»åƒ Memory
                 </h3>
                 <span className="px-2 py-0.5 bg-indigo-500/20 text-indigo-300 text-[9px] font-black rounded border border-indigo-500/30">LTM ACTIVE</span>
              </div>
              <div className="space-y-6 relative z-10">
                 {ENTERPRISE_MEMORIES.map(memory => (
                    <div key={memory.id} className="relative pl-6 border-l-2 border-indigo-500/20 group">
                       <div className="absolute -left-1.5 top-1.5 w-2.5 h-2.5 bg-indigo-500 rounded-full group-hover:scale-125 transition-transform shadow-[0_0_12px_rgba(99,102,241,0.6)] border border-slate-900"></div>
                       <div className="flex justify-between items-center mb-1.5">
                          <span className={`px-2 py-0.5 rounded-lg text-[9px] font-black uppercase border tracking-widest ${memory.color}`}>
                            {memory.type}
                          </span>
                          <span className="text-[9px] text-slate-500 font-mono flex items-center gap-1"><Clock size={10} /> {memory.date}</span>
                       </div>
                       <p className="text-[11px] text-slate-300 leading-relaxed font-bold italic line-clamp-2">â€œ{memory.content}â€</p>
                    </div>
                 ))}
              </div>
              <button 
                onClick={() => navigate('/employer/memory')}
                className="w-full mt-10 py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-[11px] font-black text-indigo-400 flex items-center justify-center gap-2 transition-all active:scale-95 group"
              >
                 <Pin size={14} className="group-hover:rotate-12 transition-transform" /> è¿›å…¥è®°å¿†ç®¡ç†ä¸­å¿ƒ
              </button>
           </div>

           <div className="bg-white p-8 rounded-3xl border border-slate-100 card-shadow">
              <h3 className="text-lg font-black text-slate-900 mb-6 flex items-center gap-2"><Activity size={18} className="text-indigo-600" /> å®æ—¶æ‹›è˜æƒ…æŠ¥</h3>
              <div className="space-y-6">
                 <div className="flex gap-4 p-4 bg-slate-50 rounded-2xl group cursor-pointer hover:bg-slate-100 transition-all">
                    <div className="w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 flex-shrink-0 group-hover:scale-110 transition-transform"><Sparkles size={18} /></div>
                    <div>
                       <p className="text-xs text-slate-600 leading-relaxed">Agent-Beta åœ¨ Github å‘ç°ä¸€åé«˜åŒ¹é…æ½œåŠ›çš„å¼€æºé¡¹ç›®è´¡çŒ®è€…ã€‚</p>
                       <span className="text-[10px] text-slate-400 font-bold uppercase mt-1 block">5åˆ†é’Ÿå‰</span>
                    </div>
                 </div>
                 <div className="flex gap-4 p-4 bg-slate-50 rounded-2xl group cursor-pointer hover:bg-slate-100 transition-all">
                    <div className="w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center text-emerald-600 flex-shrink-0 group-hover:scale-110 transition-transform"><CheckCircle2 size={18} /></div>
                    <div>
                       <p className="text-xs text-slate-600 leading-relaxed">èŒä½ â€œé«˜çº§ AI å·¥ç¨‹å¸ˆâ€ å·²æˆåŠŸå¯¹æ¥ 3 å A+ çº§å€™é€‰äººã€‚</p>
                       <span className="text-[10px] text-slate-400 font-bold uppercase mt-1 block">12åˆ†é’Ÿå‰</span>
                    </div>
                 </div>
              </div>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- ä¼ä¸šä¸»é¡µé¡µé¢ ---
const EnterpriseHomeView = () => {
  const navigate = useNavigate();
  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-700">
      <button onClick={() => navigate('/employer')} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-bold transition-colors group">
        <ChevronLeft size={20} className="group-hover:-translate-x-1 transition-transform" /> è¿”å›ç®¡ç†åå°
      </button>

      <div className="bg-white rounded-[3rem] shadow-2xl overflow-hidden border border-slate-100 relative">
        <div className="h-[340px] relative overflow-hidden">
           <div className="absolute inset-0 bg-slate-900">
              <div className="absolute inset-0 bg-gradient-to-br from-indigo-900/70 via-slate-900 to-indigo-900/40 pointer-events-none"></div>
              <div className="grid grid-cols-12 h-full opacity-[0.15]">
                 {[...Array(12)].map((_, i) => <div key={i} className="border-r border-white/10 h-full"></div>)}
              </div>
           </div>
           <div className="absolute bottom-0 left-0 w-full p-12 text-white flex flex-col md:flex-row items-end justify-between gap-8">
              <div className="flex items-center gap-8">
                 <div className="w-32 h-32 bg-white rounded-[2rem] p-8 shadow-2xl border-4 border-indigo-500/20 flex-shrink-0">
                    <Zap className="text-indigo-600 w-full h-full" />
                 </div>
                 <div>
                    <div className="inline-flex items-center gap-2 bg-indigo-500/30 px-3 py-1 rounded-full text-indigo-300 text-[10px] font-black mb-3 uppercase tracking-widest border border-indigo-400/20 backdrop-blur-sm">
                       <Globe size={12} /> AI é©±åŠ¨å‹å…ˆé”‹ä¼ä¸š
                    </div>
                    <h1 className="text-5xl font-black mb-1 tracking-tight">å¾—è‹¥æ™ºèƒ½ç§‘æŠ€</h1>
                    <p className="text-xl text-indigo-100/70 font-medium">Devnors Tech Â· é‡å¡‘æ•°å­—åŒ–æ—¶ä»£çš„ç”Ÿäº§åŠ›çº½å¸¦</p>
                 </div>
              </div>
              <div className="flex gap-4 mb-2">
                 <button className="bg-white text-slate-900 px-7 py-3.5 rounded-2xl font-black hover:bg-slate-50 transition-all shadow-xl active:scale-95 flex items-center gap-2">
                    <Mail size={18} /> æŠ•é€’ç®€å†
                 </button>
                 <button className="bg-white/10 backdrop-blur-md text-white border border-white/20 px-6 py-3.5 rounded-2xl font-black hover:bg-white/20 transition-all flex items-center gap-2">
                    <Share2 size={18} /> å…³æ³¨
                 </button>
              </div>
           </div>
        </div>

        <div className="p-12 lg:p-16 grid grid-cols-1 lg:grid-cols-12 gap-16 lg:gap-20">
           <div className="lg:col-span-8 space-y-16">
              <section>
                 <h2 className="text-2xl font-black text-slate-900 mb-6 flex items-center gap-3">
                   <div className="w-1.5 h-6 bg-indigo-600 rounded-full"></div> ä¼ä¸šä½¿å‘½ä¸æ„¿æ™¯
                 </h2>
                 <p className="text-lg text-slate-700 leading-relaxed font-medium mb-10 italic">
                    â€œæˆ‘ä»¬ä¸åªæ˜¯åœ¨æ‹›è˜å‘˜å·¥ï¼Œæˆ‘ä»¬æ˜¯åœ¨å¯»æ‰¾å…±åŒå®šä¹‰æœªæ¥ç”Ÿäº§åŠ›çš„æ•°å­—åˆä¼™äººã€‚åœ¨å¾—è‹¥ï¼Œäººç±»æ™ºæ…§ä¸å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ·±åº¦è€¦åˆï¼Œåˆ›é€ å‰æ‰€æœªæœ‰çš„å•†ä¸šä»·å€¼ã€‚â€
                 </p>
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="p-8 bg-slate-50 rounded-[2rem] border border-slate-100 hover:bg-white hover:shadow-xl hover:border-indigo-100 transition-all group">
                       <Compass className="text-indigo-600 mb-6 group-hover:scale-110 transition-transform" size={28} />
                       <h3 className="text-lg font-bold mb-3">æŠ€æœ¯å“²å­¦</h3>
                       <p className="text-slate-500 text-sm leading-relaxed">åšæŒâ€˜æ™ºèƒ½ä½“åŸç”Ÿâ€™ (Agent-Native) ç†å¿µï¼Œå°† AI æ·±åº¦é›†æˆåˆ°ç ”å‘ã€ç®¡ç†ä¸å†³ç­–çš„æ¯ä¸€ä¸ªæ¯›ç»†è¡€ç®¡ä¸­ã€‚</p>
                    </div>
                    <div className="p-8 bg-slate-50 rounded-[2rem] border border-slate-100 hover:bg-white hover:shadow-xl hover:border-emerald-100 transition-all group">
                       <Layers className="text-emerald-600 mb-6 group-hover:scale-110 transition-transform" size={28} />
                       <h3 className="text-lg font-bold mb-3">åä½œç”Ÿæ€</h3>
                       <p className="text-slate-500 text-sm leading-relaxed">æ‰“é€ æåº¦é€æ˜ã€æ•°æ®é©±åŠ¨çš„æ‰å¹³åŒ–ç¯å¢ƒã€‚æ¯ä¸€ä½å‘˜å·¥éƒ½æ‹¥æœ‰è°ƒåŠ¨å…¨å±€æ™ºèƒ½ä½“èµ„æºçš„æƒé™ã€‚</p>
                    </div>
                 </div>
              </section>

              {/* ä¼ä¸šèµ„è´¨ä¸è£èª‰æ¿å— */}
              <section>
                 <div className="flex items-baseline justify-between mb-8">
                    <h2 className="text-2xl font-black text-slate-900 flex items-center gap-3">
                      <div className="w-1.5 h-6 bg-indigo-600 rounded-full"></div> ä¼ä¸šèµ„è´¨ä¸å®åŠ›èƒŒä¹¦
                    </h2>
                    <span className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Trust & Credentials</span>
                 </div>
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-5">
                    {MOCK_QUALIFICATIONS.map((q) => (
                      <div key={q.id} className="p-7 bg-white border border-slate-100 rounded-[1.8rem] card-shadow flex gap-5 group hover:border-indigo-200 transition-all hover:-translate-y-1">
                         <div className={`w-14 h-14 ${q.bg} ${q.color} rounded-2xl flex items-center justify-center flex-shrink-0 group-hover:rotate-6 transition-transform shadow-sm`}>
                            <q.icon size={28} />
                         </div>
                         <div>
                            <h4 className="text-md font-black text-slate-900 mb-1.5">{q.title}</h4>
                            <p className="text-xs text-slate-500 leading-relaxed font-medium">{q.description}</p>
                         </div>
                      </div>
                    ))}
                 </div>
              </section>

              <section>
                 <div className="flex items-baseline justify-between mb-8">
                    <h2 className="text-2xl font-black text-slate-900 flex items-center gap-3">
                      <div className="w-1.5 h-6 bg-indigo-600 rounded-full"></div> æ ¸å¿ƒå¼€æ”¾èŒä½
                    </h2>
                    <span className="text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-2 py-0.5 rounded">{MOCK_JOBS.length} POSITIONS OPEN</span>
                 </div>
                 <div className="space-y-4">
                    {MOCK_JOBS.map(job => (
                       <div key={job.id} className="p-7 bg-white border border-slate-100 rounded-[2rem] card-shadow flex flex-col md:flex-row justify-between items-center gap-6 group hover:border-indigo-300 transition-all">
                          <div className="flex-1">
                             <div className="flex items-center gap-3 mb-2">
                                <h4 className="text-xl font-black text-slate-900 group-hover:text-indigo-600 transition-colors">{job.title}</h4>
                                {job.matchScore > 90 && <span className="bg-amber-100 text-amber-600 text-[9px] font-black px-2 py-0.5 rounded-full uppercase tracking-tighter">Hot Pick</span>}
                             </div>
                             <div className="flex flex-wrap gap-4 text-slate-400 text-xs font-bold mb-4">
                                <span className="flex items-center gap-1.5"><MapPin size={14} className="text-indigo-400" /> {job.location}</span>
                                <span className="flex items-center gap-1.5"><CircleDollarSign size={14} className="text-amber-500" /> {job.salary}</span>
                                <span className="flex items-center gap-1.5"><Clock size={14} className="text-slate-300" /> 2å°æ—¶å‰å‘å¸ƒ</span>
                             </div>
                             <div className="flex flex-wrap gap-2">
                                {job.tags.map((tag, tIdx) => (
                                  <span key={tIdx} className="bg-slate-50 text-slate-400 text-[9px] font-black px-2 py-0.5 rounded-lg border border-slate-100 uppercase tracking-tighter">{tag}</span>
                                ))}
                             </div>
                          </div>
                          <button className="w-full md:w-auto bg-slate-900 text-white px-8 py-4 rounded-2xl font-black shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-2 group-hover:scale-105 group-hover:shadow-indigo-200">
                             ç”³è¯·æ­¤èŒä½ <ArrowRight size={18} />
                          </button>
                       </div>
                    ))}
                    <button className="w-full py-5 bg-slate-50 text-slate-400 text-xs font-black rounded-[2rem] border border-dashed border-slate-200 hover:bg-white hover:text-indigo-600 hover:border-indigo-200 transition-all uppercase tracking-widest">
                       æŸ¥çœ‹æ‰€æœ‰èŒä½åˆ—è¡¨
                    </button>
                 </div>
              </section>
           </div>

           <div className="lg:col-span-4 space-y-10">
              <div className="bg-slate-900 p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden group">
                 <div className="absolute top-0 right-0 p-10 opacity-10 group-hover:scale-110 transition-transform"><Activity size={120} /></div>
                 <h3 className="text-xl font-black mb-8 border-b border-white/5 pb-4">é›‡ä¸»æ•°æ®æ´å¯Ÿ</h3>
                 <div className="space-y-8 relative z-10">
                    <div>
                       <div className="flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2">æ–‡åŒ–åŒ¹é…æ»¡æ„åº¦</div>
                       <div className="text-3xl font-black flex items-baseline gap-1">98.2 <span className="text-xs font-bold text-indigo-400">%</span></div>
                    </div>
                    <div>
                       <div className="flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2">å¹³å‡æ™‹å‡å‘¨æœŸ</div>
                       <div className="text-3xl font-black flex items-baseline gap-1">1.2 <span className="text-xs font-bold text-indigo-400">YEARS</span></div>
                    </div>
                    <div>
                       <div className="flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2">å›¢é˜Ÿè§„æ¨¡</div>
                       <div className="text-3xl font-black flex items-baseline gap-1">120+ <span className="text-xs font-bold text-indigo-400">MEMBERS</span></div>
                    </div>
                    <div className="pt-6 border-t border-white/10 text-xs text-slate-500 italic leading-relaxed">
                       â€œAgent è¯„ä¼°ï¼šè¯¥ä¼ä¸šå…·æœ‰æé«˜çš„äººæ‰ç•™å­˜ç‡ä¸æŠ€æœ¯å‘å¿ƒåŠ›ã€‚â€
                    </div>
                 </div>
              </div>

              <div className="p-10 bg-slate-50 rounded-[2.5rem] border border-slate-100">
                 <h3 className="text-lg font-black mb-8 flex items-center gap-2 text-slate-900"><MapPin className="text-indigo-600" /> æ€»éƒ¨ä½ç½®</h3>
                 <div className="bg-slate-200 h-40 rounded-3xl mb-6 flex items-center justify-center text-slate-400 font-bold shadow-inner relative group cursor-pointer overflow-hidden">
                    <div className="absolute inset-0 bg-indigo-600/10 group-hover:bg-indigo-600/0 transition-colors"></div>
                    [ é«˜å¾·/Google Map ç»„ä»¶ ]
                 </div>
                 <p className="text-sm font-bold text-slate-700 mb-2">ä¸Šæµ· Â· å¼ æ±Ÿé«˜ç§‘æŠ€å›­åŒº</p>
                 <p className="text-xs text-slate-400 leading-relaxed font-medium">å¾—è‹¥æ™ºèƒ½ä¸­å¿ƒ A åº§ 12-18 å±‚</p>
              </div>

              <div className="p-8 bg-indigo-600 rounded-[2.5rem] text-white shadow-xl relative overflow-hidden group">
                 <Sparkle className="absolute -right-6 -bottom-6 w-32 h-32 text-white/10" />
                 <h3 className="text-lg font-black mb-4 flex items-center gap-2">åŠ å…¥æå®¢ç¤¾ç¾¤</h3>
                 <p className="text-xs text-indigo-100 leading-relaxed font-medium mb-6">æ¯å‘¨ä¸€æ¬¡çš„æŠ€æœ¯æ²™é¾™ï¼Œä¸å…¨çƒæ™ºèƒ½ä½“å¼€å‘è€…æ·±åº¦æ¢è®¨ AI è¾¹ç•Œã€‚</p>
                 <button className="w-full py-3.5 bg-white text-indigo-600 font-black text-xs rounded-xl active:scale-95 transition-all">
                    è·å–æ´»åŠ¨æ—¥å†
                 </button>
              </div>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- çœŸæ­£ç‹¬ç«‹ä¸”è¯¦ç»†çš„äººæ‰è¯¦æƒ…é¡µ (TalentDetailView) ---
const TalentDetailView = () => {
  const { talentId } = useParams();
  const navigate = useNavigate();
  const talent = useMemo(() => MOCK_TALENTS.find(t => t.id === talentId), [talentId]);

  if (!talent) {
    return (
      <div className="pt-40 text-center animate-pulse">
        <Loader2 className="animate-spin mx-auto text-indigo-600 mb-4" size={48} />
        <p className="text-slate-500 font-bold">æ­£åœ¨è°ƒå–å¤šæ™ºèƒ½ä½“è¯„ä¼°æ¡£æ¡ˆ...</p>
      </div>
    );
  }

  return (
    <div className="pt-32 pb-20 px-6 max-w-7xl mx-auto animate-in fade-in duration-500">
      <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 mb-10 font-black transition-colors group">
        <ChevronLeft size={20} className="group-hover:-translate-x-1 transition-transform" /> è¿”å›å·¥ä½œå°
      </button>

      <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
        <div className="lg:col-span-8 space-y-12">
           {/* é¡¶éƒ¨æ¡£æ¡ˆå¡ç‰‡ */}
           <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow flex flex-col md:flex-row gap-10 items-center">
              <div className="w-40 h-40 bg-indigo-600 text-white flex items-center justify-center text-5xl font-black rounded-[2.5rem] shadow-2xl ring-8 ring-indigo-50">
                 {talent.name.charAt(0)}
              </div>
              <div className="flex-1 text-center md:text-left">
                 <div className="flex flex-col md:flex-row md:items-center gap-4 mb-4">
                    <h1 className="text-5xl font-black text-slate-900 tracking-tight">{talent.name}</h1>
                    <span className="inline-flex items-center gap-1.5 px-4 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black uppercase tracking-widest border border-indigo-100">
                       <Zap size={14} /> åŒ¹é…åˆ† {talent.matchScore}%
                    </span>
                 </div>
                 <p className="text-xl text-indigo-600 font-black mb-6">{talent.role} Â· {talent.experienceYears} å¹´å®æˆ˜ç»éªŒ</p>
                 <div className="flex flex-wrap gap-2 justify-center md:justify-start">
                    {talent.skills.map((s, i) => (
                       <span key={i} className="px-4 py-2 bg-slate-50 text-slate-500 text-xs font-bold rounded-xl border border-slate-100">{s}</span>
                    ))}
                 </div>
              </div>
           </div>

           {/* AI ç®€å†è§£ææ€»ç»“ */}
           <div className="bg-indigo-600 text-white rounded-[3rem] p-12 shadow-2xl relative overflow-hidden">
              <Sparkles className="absolute -right-10 -bottom-10 w-64 h-64 text-white/10" />
              <h3 className="text-2xl font-black mb-8 flex items-center gap-3">
                 <Bot size={28} /> AI æ™ºèƒ½ç”»åƒç»¼è¿° (Executive Summary)
              </h3>
              <p className="text-xl leading-relaxed text-indigo-50 font-medium italic">
                 â€œ{talent.summary}â€
              </p>
              <div className="mt-10 pt-10 border-t border-white/10 flex flex-wrap gap-8">
                 <div>
                    <div className="text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-1">æ´»è·ƒçŠ¶æ€</div>
                    <div className="text-lg font-black">{talent.status}</div>
                 </div>
                 <div>
                    <div className="text-[10px] font-black text-indigo-300 uppercase tracking-widest mb-1">Token æ¶ˆè€—</div>
                    <div className="text-lg font-black">{talent.tokensConsumed}</div>
                 </div>
              </div>
           </div>

           {/* é¢è¯•å†å²å›é¡¾ */}
           <div className="bg-white rounded-[3rem] p-12 border border-slate-100 card-shadow">
              <h3 className="text-2xl font-black text-slate-900 mb-10 flex items-center gap-3">
                 <History className="text-indigo-600" /> é¢è¯•æµç¨‹å®å½• (Interview Logs)
              </h3>
              <div className="space-y-8">
                 <div className="p-8 bg-slate-50 rounded-[2rem] border border-slate-100">
                    <div className="flex justify-between items-center mb-6">
                       <div className="font-black text-slate-900">AI å‹åŠ›é¢è¯•åˆè¯•</div>
                       <div className="text-xs font-bold text-emerald-600 px-3 py-1 bg-emerald-50 rounded-full">é€šè¿‡ (Pass)</div>
                    </div>
                    <div className="space-y-4">
                       {talent.interviewQuestions?.map((q, i) => (
                          <div key={i} className="flex gap-4">
                             <div className="w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 font-black text-xs">Q{i+1}</div>
                             <p className="text-sm text-slate-600 font-medium">{q}</p>
                          </div>
                       ))}
                    </div>
                 </div>
              </div>
           </div>
        </div>

        <div className="lg:col-span-4 space-y-12">
           {/* èƒ½åŠ›é›·è¾¾å›¾ */}
           <div className="bg-white rounded-[3rem] p-10 border border-slate-100 card-shadow">
              <h3 className="text-xl font-black text-slate-900 mb-8 flex items-center gap-2">
                 <BarChart3 className="text-indigo-600" /> æ ¸å¿ƒç«äº‰åŠ›é›·è¾¾å›¾
              </h3>
              <RadarChart data={talent.radarData} />
           </div>

           {/* ä¾§è¾¹ä¿¡æ¯æ¡ */}
           <div className="bg-slate-900 text-white rounded-[3rem] p-10 shadow-2xl">
              <h3 className="text-xl font-black mb-8 flex items-center gap-2">
                 <Target className="text-indigo-400" /> æ”¹è¿›ä¸è°ƒä¼˜å»ºè®®
              </h3>
              <ul className="space-y-6">
                 {talent.optimizationSuggestions?.map((s, i) => (
                    <li key={i} className="flex gap-4 items-start">
                       <div className="w-2 h-2 bg-indigo-400 rounded-full mt-2 flex-shrink-0"></div>
                       <p className="text-sm text-slate-400 font-medium leading-relaxed">{s}</p>
                    </li>
                 ))}
              </ul>
              <button className="w-full mt-10 py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-black rounded-2xl shadow-xl transition-all active:scale-95 flex items-center justify-center gap-2">
                 <Send size={18} /> å‘èµ·æ­£å¼å½•ç”¨æµç¨‹
              </button>
           </div>
        </div>
      </div>
    </div>
  );
};

// --- ä¿®æ”¹åçš„ç™»å½•è§†å›¾ (LoginView) ---
const LoginView = () => (
  <div className="pt-40 pb-20 px-6 max-md mx-auto min-h-screen">
    <div className="bg-white rounded-[2.5rem] p-12 shadow-2xl border border-slate-100 text-center max-w-md mx-auto relative overflow-hidden">
       {/* å“ç‰Œè£…é¥° */}
       <div className="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-indigo-600 via-purple-600 to-rose-600"></div>
       
       <div className="w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-xl shadow-indigo-100 rotate-6 transition-transform hover:rotate-0">
         <Zap className="text-white" size={40}/>
       </div>
       <h2 className="text-3xl font-black text-slate-900 mb-3 tracking-tight">æ¬¢è¿å›æ¥</h2>
       <p className="text-slate-400 text-sm font-medium mb-10 uppercase tracking-widest">æ™ºèƒ½æ‹›è˜ç©ºé—´å…¥å£</p>
       
       {/* æ‰‹æœºå·ç™»å½• */}
       <div className="space-y-4 mb-10">
          <input type="tel" className="w-full bg-slate-50 border border-slate-100 rounded-2xl py-4 px-6 font-bold focus:ring-4 focus:ring-indigo-500/10 focus:bg-white focus:outline-none transition-all" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" />
          <div className="flex gap-2">
            <input type="text" className="flex-1 bg-slate-50 border border-slate-100 rounded-2xl py-4 px-6 font-bold focus:ring-4 focus:ring-indigo-500/10 focus:bg-white focus:outline-none transition-all" placeholder="éªŒè¯ç " />
            <button className="bg-white border border-slate-200 text-indigo-600 px-4 rounded-2xl text-xs font-black whitespace-nowrap hover:bg-slate-50">è·å–éªŒè¯ç </button>
          </div>
          <button className="w-full bg-gradient-to-r from-slate-900 to-slate-800 text-white font-black py-5 rounded-2xl shadow-xl shadow-slate-900/20 active:scale-98 transition-all mt-4 hover:shadow-2xl">æ‰‹æœºå¿«æ·ç™»å½•</button>
       </div>

       {/* ç¬¬ä¸‰æ–¹ç™»å½•åˆ†å‰²çº¿ */}
       <div className="flex items-center gap-4 mb-8">
          <div className="h-px bg-slate-100 flex-1"></div>
          <span className="text-[10px] font-black text-slate-300 uppercase tracking-widest">å…¶ä»–å¿«æ·å…¥å£</span>
          <div className="h-px bg-slate-100 flex-1"></div>
       </div>

       {/* ç¬¬ä¸‰æ–¹æŒ‰é’® */}
       <div className="grid grid-cols-2 gap-4">
          <button className="flex items-center justify-center gap-3 py-3.5 border border-slate-100 bg-white rounded-2xl hover:bg-slate-50 transition-all group active:scale-95">
             <div className="p-1.5 bg-slate-900 text-white rounded-lg"><GithubIcon size={16} /></div>
             <span className="text-xs font-black text-slate-700">GitHub</span>
          </button>
          <button className="flex items-center justify-center gap-3 py-3.5 border border-slate-100 bg-white rounded-2xl hover:bg-emerald-50 transition-all group active:scale-95">
             <div className="p-1.5 bg-emerald-500 text-white rounded-lg"><MessageCircle size={16} /></div>
             <span className="text-xs font-black text-slate-700">å¾®ä¿¡ç™»å½•</span>
          </button>
       </div>

       <p className="mt-12 text-[10px] font-bold text-slate-300 uppercase tracking-[0.2em]">Devnors Auth Gateway</p>
    </div>
  </div>
);

const App = () => {
  return (
    <Router>
      <div className="min-h-screen flex flex-col">
        <Navbar />
        <main className="flex-1">
          <Routes>
            <Route path="/" element={<LandingPage />} />
            <Route path="/workbench" element={<WorkbenchView />} />
            <Route path="/workbench/todo/:todoId" element={<TodoDetailView />} />
            <Route path="/candidate" element={<CandidateView />} />
            <Route path="/candidate/resume" element={<CandidateResumeDetail />} />
            <Route path="/candidate/home" element={<CandidateHomeView />} />
            <Route path="/candidate/memory" element={<CandidateMemoryView />} />
            <Route path="/candidate/profile" element={<CandidateProfileView />} />
            <Route path="/candidate/job/:jobId" element={<JobDetailView />} />
            <Route path="/employer" element={<EmployerDashboard />} />
            <Route path="/employer/memory" element={<EnterpriseMemoryView />} />
            <Route path="/employer/home" element={<EnterpriseHomeView />} />
            <Route path="/employer/talent/:talentId" element={<TalentDetailView />} />
            <Route path="/tokens" element={<TokenManagementView />} />
            <Route path="/settings" element={<SettingsManagementView />} />
            <Route path="/about" element={<AboutUsView />} />
            <Route path="/login" element={<LoginView />} />
          </Routes>
        </main>
        
        <footer className="py-20 border-t border-slate-200 mt-20 bg-white">
          <div className="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-3 gap-12 items-center">
            <div className="text-center md:text-left">
              <Link to="/" className="flex items-center justify-center md:justify-start space-x-2 mb-4 group">
                <div className="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shadow-md group-hover:rotate-12 transition-transform">
                  <Zap className="text-white w-5 h-5" />
                </div>
                <span className="text-xl font-bold text-slate-900">Devnors å¾—è‹¥</span>
              </Link>
              <p className="text-slate-400 text-sm leading-relaxed">AI åŸç”Ÿæ‹›è˜å¹³å°ã€‚åŠ©åŠ›äººæ‰å®ç°èŒä¸šæ¢¦æƒ³ï¼Œä¸ºä¼ä¸šç²¾å‡†æ¨èå…¨çƒç²¾è‹±ã€‚</p>
            </div>
            <div className="flex justify-center space-x-12 text-sm font-bold text-slate-500">
               <Link to="/about" className="hover:text-indigo-600 transition-colors">å…³äºæˆ‘ä»¬</Link>
               <Link to="/candidate" className="hover:text-indigo-600 transition-colors">äººæ‰ç«¯</Link>
               <Link to="/employer" className="hover:text-indigo-600 transition-colors font-bold">ä¼ä¸šç«¯</Link>
            </div>
            <div className="text-center md:text-right text-slate-400 text-xs font-medium">
               <p>Â© 2024 Devnors å¾—è‹¥æ™ºèƒ½ä½“. All rights reserved.</p>
               <p className="mt-1 uppercase tracking-tighter">Powered by Multi-Agent Synergy</p>
            </div>
          </div>
        </footer>
      </div>
    </Router>
  );
};

// --- æ±‚èŒç®€å†ç®¡ç†é¡µ (ä¾›äººæ‰ç«¯ä½¿ç”¨) ---
const CandidateResumeDetail = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const profile = location.state?.profile as CandidateProfile;

  if (!profile) return (
    <div className="pt-40 text-center">
       <p className="text-slate-400 font-bold mb-4">æœªæ‰¾åˆ°ç®€å†æ•°æ®</p>
       <button onClick={() => navigate('/candidate')} className="bg-indigo-600 text-white px-6 py-2 rounded-xl">è¿”å›ä¸Šä¼ </button>
    </div>
  );

  return (
    <div className="pt-32 pb-20 px-6 max-w-5xl mx-auto">
      <div className="flex justify-between items-center mb-8">
        <button onClick={() => navigate(-1)} className="flex items-center gap-2 text-slate-500 hover:text-indigo-600 font-black transition-colors">
          <ChevronLeft size={20} /> è¿”å›
        </button>
        <div className="flex gap-4">
          <button onClick={() => window.print()} className="flex items-center gap-2 bg-slate-900 text-white px-4 py-2 rounded-xl text-sm font-bold">
            <Download size={16} /> å¯¼å‡º PDF
          </button>
        </div>
      </div>
      <div className="bg-white rounded-[3rem] border border-slate-100 shadow-2xl overflow-hidden p-16">
        <div className="flex items-center gap-8 mb-12">
           <div className="w-24 h-24 bg-indigo-600 text-white flex items-center justify-center text-4xl font-black rounded-3xl">{profile.name.charAt(0)}</div>
           <div>
              <h1 className="text-5xl font-black mb-2">{profile.name}</h1>
              <p className="text-indigo-600 font-black text-xl">{profile.role}</p>
           </div>
        </div>
        <div className="space-y-12">
           <section>
              <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">ä¸ªäººç®€è¿°</h3>
              <p className="text-xl text-slate-700 leading-relaxed font-medium">{profile.summary}</p>
           </section>
           <section className="grid grid-cols-1 md:grid-cols-2 gap-10">
              <div>
                 <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">ä¸“ä¸šæŠ€èƒ½æ¸…å•</h3>
                 <div className="flex flex-wrap gap-2">
                    {profile.skills.map((s, i) => <span key={i} className="px-3 py-1 bg-slate-50 text-slate-500 text-xs font-bold rounded-lg border border-slate-100">{s}</span>)}
                 </div>
              </div>
              <div>
                 <h3 className="text-xs font-black text-slate-400 uppercase tracking-widest mb-4">ç”»åƒæ”¹è¿›æ–¹å‘</h3>
                 <ul className="space-y-2">
                    {profile.optimizationSuggestions?.map((s, i) => (
                      <li key={i} className="text-sm text-slate-600 font-medium flex items-center gap-2">
                         <div className="w-1.5 h-1.5 bg-indigo-500 rounded-full"></div> {s}
                      </li>
                    ))}
                 </ul>
              </div>
           </section>
        </div>
      </div>
    </div>
  );
};

export default App;
